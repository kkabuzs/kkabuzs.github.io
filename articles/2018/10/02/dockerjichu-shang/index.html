<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Docker基础（上） | kkabuzs博客屋</title><meta name="author" content="Kkabuzs"><meta name="copyright" content="Kkabuzs"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="无论你跑多少距离，放弃很容易，停下来，肉体得到暂时的舒服，但你最终会一无所得。坚持或许很难，但你最后一定会有所收获，跑过的路，永远不会欺骗自己。  Docker基础（上）一，Docker简介，功能特性与应用场景1.1 Docker简介  Docker是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的Linux机器上，也可以实现虚拟化，容器是完">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker基础（上）">
<meta property="og:url" content="https://kkabuzs.github.io/articles/2018/10/02/dockerjichu-shang/index.html">
<meta property="og:site_name" content="kkabuzs博客屋">
<meta property="og:description" content="无论你跑多少距离，放弃很容易，停下来，肉体得到暂时的舒服，但你最终会一无所得。坚持或许很难，但你最后一定会有所收获，跑过的路，永远不会欺骗自己。  Docker基础（上）一，Docker简介，功能特性与应用场景1.1 Docker简介  Docker是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的Linux机器上，也可以实现虚拟化，容器是完">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://kkabuzs.github.io/themes-img/touxiang.jpg">
<meta property="article:published_time" content="2018-10-02T13:18:35.000Z">
<meta property="article:modified_time" content="2018-10-02T13:18:35.000Z">
<meta property="article:author" content="Kkabuzs">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://kkabuzs.github.io/themes-img/touxiang.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Docker基础（上）",
  "url": "https://kkabuzs.github.io/articles/2018/10/02/dockerjichu-shang/",
  "image": "https://kkabuzs.github.io/themes-img/touxiang.jpg",
  "datePublished": "2018-10-02T13:18:35.000Z",
  "dateModified": "2018-10-02T13:18:35.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Kkabuzs",
      "url": "https://kkabuzs.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/themes-img/touxiang.jpg"><link rel="canonical" href="https://kkabuzs.github.io/articles/2018/10/02/dockerjichu-shang/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Docker基础（上）',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/themes-img/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">67</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">18</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/themes-img/yinhe.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/themes-img/touxiang.jpg" alt="Logo"><span class="site-name">kkabuzs博客屋</span></a><a class="nav-page-title" href="/"><span class="site-name">Docker基础（上）</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Docker基础（上）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2018-10-02T13:18:35.000Z" title="发表于 2018-10-02 21:18:35">2018-10-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2018-10-02T13:18:35.000Z" title="更新于 2018-10-02 21:18:35">2018-10-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AE%B9%E5%99%A8%E8%87%AA%E5%8A%A8%E5%8C%96/">容器自动化</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><blockquote>
<p><em>无论你跑多少距离，放弃很容易，停下来，肉体得到暂时的舒服，但你最终会一无所得。</em><br><em>坚持或许很难，但你最后一定会有所收获，跑过的路，永远不会欺骗自己。</em></p>
</blockquote>
<h1 id="Docker基础（上）"><a href="#Docker基础（上）" class="headerlink" title="Docker基础（上）"></a>Docker基础（上）</h1><h2 id="一，Docker简介，功能特性与应用场景"><a href="#一，Docker简介，功能特性与应用场景" class="headerlink" title="一，Docker简介，功能特性与应用场景"></a>一，Docker简介，功能特性与应用场景</h2><h3 id="1-1-Docker简介"><a href="#1-1-Docker简介" class="headerlink" title="1.1 Docker简介"></a>1.1 Docker简介</h3><ul>
<li><input checked="" disabled="" type="checkbox"> Docker是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的Linux机器上，也可以实现虚拟化，容器是完全使用沙箱机制，相互之间不会有任何接口。</li>
<li><input checked="" disabled="" type="checkbox"> 一个完整的Docker有以下几个部分组成： <ul>
<li>Docker Client 客户端</li>
<li>Docker Daemon 守护进程</li>
<li>Docker Image 镜像</li>
<li>Docker Container 容器</li>
</ul>
</li>
</ul>
<h3 id="1-2-Docker功能特性"><a href="#1-2-Docker功能特性" class="headerlink" title="1.2 Docker功能特性"></a>1.2 Docker功能特性</h3><ul>
<li><input checked="" disabled="" type="checkbox"> 隔离环境（系统，网络，文件系统）与应用</li>
<li><input checked="" disabled="" type="checkbox"> 解决依赖与版本问题</li>
<li><input checked="" disabled="" type="checkbox"> 易于分发，开箱即用</li>
<li><input checked="" disabled="" type="checkbox"> 节点与容器快速扩容</li>
<li><input checked="" disabled="" type="checkbox"> 镜像制作简单便捷，管理方便</li>
</ul>
<p>（1）隔离</p>
<blockquote>
</blockquote>
<ul>
<li>通过cgroup（隔离和跟踪资源的使用）&amp; namespace（组与组之间隔离）来实现轻量级的进程隔离</li>
<li>对于容器中运行的进程来说，自己独占了一个系统</li>
<li>容器间网络，文件及其他资源都互相隔离</li>
</ul>
<p>（2）版本与依赖</p>
<blockquote>
</blockquote>
<ul>
<li>传统模式下，多个不同环境或版本的项目需要部署在不同机器上，部署与后期维护管理复杂繁琐。</li>
<li>使用Docker，通过多个不同版本或者环境的镜像，可以同时运行在一台机器上互不干扰，部署与后期维护简单方便。</li>
</ul>
<p>（3）分发与使用</p>
<blockquote>
</blockquote>
<ul>
<li>镜像可以通过导入，导出，上传到镜像仓库等多种方式进行分发</li>
<li>在启动了Docker的系统上直接使用docker run即可启动镜像，无需特别配置。</li>
</ul>
<p>（4）扩容</p>
<blockquote>
</blockquote>
<ul>
<li>容器扩容简单方便</li>
<li>扩容节点只需安装并启动Docker即可</li>
</ul>
<p>（5）镜像制作</p>
<blockquote>
</blockquote>
<ul>
<li>镜像的灵魂Dockerfile</li>
<li>使用Dockerfile进行指令控制</li>
<li>基于Linux命令，易于理解，快速上手</li>
<li>易于定制与修改</li>
</ul>
<h3 id="1-3-Docker应用场景"><a href="#1-3-Docker应用场景" class="headerlink" title="1.3 Docker应用场景"></a>1.3 Docker应用场景</h3><ul>
<li><input checked="" disabled="" type="checkbox"> Docker通常应用于如下场景： <ul>
<li>web应用的自动化打包和发布；</li>
<li>自动化测试和持续集成，发布；</li>
<li>应用服务，如MySQL，Redis等，通过Docker实现快速部署；</li>
<li>k8s私有云</li>
</ul>
</li>
</ul>
<h4 id="1-3-1-场景1：多版本多种类系统与软件"><a href="#1-3-1-场景1：多版本多种类系统与软件" class="headerlink" title="1.3.1 场景1：多版本多种类系统与软件"></a>1.3.1 场景1：多版本多种类系统与软件</h4><p><img src="/articles/2018/10/02/dockerjichu-shang/1.png"></p>
<h4 id="1-3-2-场景2：-环境"><a href="#1-3-2-场景2：-环境" class="headerlink" title="1.3.2 场景2： 环境"></a>1.3.2 场景2： 环境</h4><p><img src="/articles/2018/10/02/dockerjichu-shang/2.png"></p>
<h4 id="1-3-3-场景3：-分发"><a href="#1-3-3-场景3：-分发" class="headerlink" title="1.3.3 场景3： 分发"></a>1.3.3 场景3： 分发</h4><p><img src="/articles/2018/10/02/dockerjichu-shang/3.png"></p>
<h2 id="二，Docker的安装"><a href="#二，Docker的安装" class="headerlink" title="二，Docker的安装"></a>二，Docker的安装</h2><h3 id="2-1-安装环境"><a href="#2-1-安装环境" class="headerlink" title="2.1 安装环境"></a>2.1 安装环境</h3><blockquote>
<p>最小化安装Centos7.5</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /etc/redhat-release</span><br><span class="line">CentOS Linux release 7.5.1804 (Core) </span><br><span class="line">[root@localhost ~]# <span class="built_in">uname</span> -r</span><br><span class="line">3.10.0-862.el7.x86_64</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>关闭防火墙和selinux</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# systemctl stop firewalld</span><br><span class="line">[root@localhost ~]# systemctl <span class="built_in">disable</span> firewalld</span><br><span class="line">[root@localhost ~]# setenforce 0</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-2-版本选择"><a href="#2-2-版本选择" class="headerlink" title="2.2 版本选择"></a>2.2 版本选择</h3><ul>
<li><input checked="" disabled="" type="checkbox"> Docker <ul>
<li>17.03之后版本变为Docker CE</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> Docker CE <ul>
<li>社区版，Community Edition</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> Docker EE <ul>
<li>企业版，Enterprise Edition</li>
<li>收费版本，强调安全性，提供一些高级特性及商业支持</li>
</ul>
</li>
</ul>
<h3 id="2-3-Docker安装：标准版本"><a href="#2-3-Docker安装：标准版本" class="headerlink" title="2.3 Docker安装：标准版本"></a>2.3 Docker安装：标准版本</h3><blockquote>
<p>特别提示：<br>centos7.5在搭建本地yum仓库的时候只需要修改<br>CentOS-Media.repo 文件即可（不需要将其他文件仍子目录里）<br>确保虚拟机能正常上网</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum -y install docker</span><br><span class="line">[root@localhost ~]# systemctl start docker              <span class="comment">#启动docker进程</span></span><br><span class="line">[root@localhost ~]# systemctl <span class="built_in">enable</span> docker             <span class="comment">#加入docker开机启动</span></span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/docker.service to /usr/lib/systemd/system/docker.service.</span><br><span class="line">[root@localhost ~]# docker ps           <span class="comment">#查看封装在docker镜像中的正在运行的镜像进程</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">[root@localhost ~]# docker version</span><br><span class="line">Client:</span><br><span class="line"> Version:         1.13.1</span><br><span class="line"> API version:     1.26</span><br><span class="line"> Package version: docker-1.13.1-75.git8633870.el7.centos.x86_64</span><br><span class="line"> Go version:      go1.9.4</span><br><span class="line"> Git commit:      8633870/1.13.1</span><br><span class="line"> Built:           Fri Sep 28 19:45:08 2018</span><br><span class="line"> OS/Arch:         linux/amd64</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Version:         1.13.1</span><br><span class="line"> API version:     1.26 (minimum version 1.12)</span><br><span class="line"> Package version: docker-1.13.1-75.git8633870.el7.centos.x86_64</span><br><span class="line"> Go version:      go1.9.4</span><br><span class="line"> Git commit:      8633870/1.13.1</span><br><span class="line"> Built:           Fri Sep 28 19:45:08 2018</span><br><span class="line"> OS/Arch:         linux/amd64</span><br><span class="line"> Experimental:    <span class="literal">false</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-4-Docker安装：CE社区版"><a href="#2-4-Docker安装：CE社区版" class="headerlink" title="2.4 Docker安装：CE社区版"></a>2.4 Docker安装：CE社区版</h3><blockquote>
<p>首先清理掉yum安装的docker标准版<br>这里有两种方式</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#第一种清理docker方法</span></span><br><span class="line">[root@localhost ~]# yum -y remove docker</span><br><span class="line"></span><br><span class="line"><span class="comment">#第二种清理docker方法</span></span><br><span class="line">[root@localhost ~]# yum <span class="built_in">history</span> list            <span class="comment">#查看yum安装的历史列表</span></span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">ID     | Login user               | Date and <span class="keyword">time</span>    | Action(s)      | Altered</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">     5 | root &lt;root&gt;              | 2018-10-03 05:30 | I, U           |   29    <span class="comment">#这次就是安装的docker</span></span><br><span class="line">     4 | root &lt;root&gt;              | 2018-09-10 21:53 | Install        |    1   </span><br><span class="line">     3 | root &lt;root&gt;              | 2018-09-10 21:52 | Install        |   51   </span><br><span class="line">     2 | root &lt;root&gt;              | 2018-09-10 21:49 | I, U           |   42   </span><br><span class="line">     1 | System &lt;<span class="built_in">unset</span>&gt;           | 2018-09-10 21:14 | Install        |  311   </span><br><span class="line"><span class="built_in">history</span> list</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# yum <span class="built_in">history</span> info 5              <span class="comment">#查看yum历史安装ID为5的安装信息</span></span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Transaction ID : 5</span><br><span class="line">Begin <span class="keyword">time</span>     : Wed Oct  3 05:30:44 2018</span><br><span class="line">Begin rpmdb    : 402:a21e595e89a560c63b9b56a960a15973500ac077</span><br><span class="line">End <span class="keyword">time</span>       :            05:31:31 2018 (47 seconds)</span><br><span class="line">End rpmdb      : 429:96445b97491375cff0acc3f0dfcbc2155ee5f7e7</span><br><span class="line">User           : root &lt;root&gt;</span><br><span class="line">Return-Code    : Success</span><br><span class="line">Command Line   : -y install docker</span><br><span class="line">Transaction performed with:</span><br><span class="line">    Installed     rpm-4.11.3-32.el7.x86_64                      @anaconda</span><br><span class="line">    Installed     yum-3.4.3-158.el7.centos.noarch               @anaconda</span><br><span class="line">    Installed     yum-plugin-fastestmirror-1.1.31-45.el7.noarch @anaconda</span><br><span class="line">Packages Altered:</span><br><span class="line">    Dep-Install PyYAML-3.10-11.el7.x86_64                                          @base</span><br><span class="line">    Dep-Install atomic-registries-1:1.22.1-25.git5a342e3.el7.centos.x86_64         @extras</span><br><span class="line">    Updated     audit-2.8.1-3.el7.x86_64                                           @anaconda</span><br><span class="line">    Update            2.8.1-3.el7_5.1.x86_64                                       @updates</span><br><span class="line">    Updated     audit-libs-2.8.1-3.el7.x86_64                                      @anaconda</span><br><span class="line">    Update                 2.8.1-3.el7_5.1.x86_64                                  @updates</span><br><span class="line">    Dep-Install audit-libs-python-2.8.1-3.el7_5.1.x86_64                           @updates</span><br><span class="line">    Dep-Install checkpolicy-2.5-6.el7.x86_64                                       @base</span><br><span class="line">    Dep-Install container-selinux-2:2.68-1.el7.noarch                              @extras</span><br><span class="line">    Dep-Install container-storage-setup-0.11.0-2.git5eaf76c.el7.noarch             @extras</span><br><span class="line">    Install     docker-2:1.13.1-75.git8633870.el7.centos.x86_64                    @extras</span><br><span class="line">    Dep-Install docker-client-2:1.13.1-75.git8633870.el7.centos.x86_64             @extras</span><br><span class="line">    Dep-Install docker-common-2:1.13.1-75.git8633870.el7.centos.x86_64             @extras</span><br><span class="line">    Dep-Install libcgroup-0.41-15.el7.x86_64                                       @base</span><br><span class="line">    Dep-Install libseccomp-2.3.1-3.el7.x86_64                                      @base</span><br><span class="line">    Dep-Install libsemanage-python-2.5-11.el7.x86_64                               @base</span><br><span class="line">    Dep-Install libyaml-0.1.4-11.el7_0.x86_64                                      @base</span><br><span class="line">    Dep-Install oci-register-machine-1:0-6.git2b44233.el7.x86_64                   @extras</span><br><span class="line">    Dep-Install oci-systemd-hook-1:0.1.17-2.git83283a0.el7.x86_64                  @extras</span><br><span class="line">    Dep-Install oci-umount-2:2.3.3-3.gite3c9055.el7.x86_64                         @extras</span><br><span class="line">    Dep-Install policycoreutils-python-2.5-22.el7.x86_64                           @base</span><br><span class="line">    Dep-Install python-IPy-0.75-6.el7.noarch                                       @base</span><br><span class="line">    Dep-Install python-backports-1.0-8.el7.x86_64                                  @base</span><br><span class="line">    Dep-Install python-backports-ssl_match_hostname-3.5.0.1-1.el7.noarch           @base</span><br><span class="line">    Dep-Install python-ipaddress-1.0.16-2.el7.noarch                               @base</span><br><span class="line">    Dep-Install python-pytoml-0.1.14-1.git7dea353.el7.noarch                       @extras</span><br><span class="line">    Dep-Install python-setuptools-0.9.8-7.el7.noarch                               @base</span><br><span class="line">    Dep-Install setools-libs-3.3.8-2.el7.x86_64                                    @base</span><br><span class="line">    Dep-Install skopeo-containers-1:0.1.31-1.dev.gitae64ff7.el7.centos.x86_64      @extras</span><br><span class="line">    Dep-Install subscription-manager-rhsm-certificates-1.20.11-1.el7.centos.x86_64 @base</span><br><span class="line">    Dep-Install yajl-2.0.4-4.el7.x86_64                                            @base</span><br><span class="line"><span class="built_in">history</span> info</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# yum -y <span class="built_in">history</span> undo 5       <span class="comment">#进行yum安装操作回退</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>yum的回退安装在工作中很有用<br>接下来安装Docker的CE社区版</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装依赖包</span></span><br><span class="line">[root@localhost ~]# yum -y install yum-utils device-mapper-persistent-data lvm2</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加docker的CE版本的yum源配置文件</span></span><br><span class="line">[root@Docker ~]# yum-config-manager \</span><br><span class="line">     --add-repo \</span><br><span class="line">     https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line">[root@localhost ~]# yum makecache fast</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装CE版本的docker</span></span><br><span class="line">[root@localhost ~]# yum -y install docker-ce</span><br><span class="line">[root@localhost ~]# systemctl start docker      <span class="comment">#启动docker</span></span><br><span class="line">[root@localhost ~]# systemctl <span class="built_in">enable</span> docker     <span class="comment">#添加开机启动</span></span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/docker.service to /usr/lib/systemd/system/docker.service.</span><br><span class="line">[root@localhost ~]# docker version          <span class="comment">#查看docker版本</span></span><br><span class="line">Client:</span><br><span class="line"> Version:           18.06.1-ce</span><br><span class="line"> API version:       1.38</span><br><span class="line"> Go version:        go1.10.3</span><br><span class="line"> Git commit:        e68fc7a</span><br><span class="line"> Built:             Tue Aug 21 17:23:03 2018</span><br><span class="line"> OS/Arch:           linux/amd64</span><br><span class="line"> Experimental:      <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          18.06.1-ce</span><br><span class="line">  API version:      1.38 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.10.3</span><br><span class="line">  Git commit:       e68fc7a</span><br><span class="line">  Built:            Tue Aug 21 17:25:29 2018</span><br><span class="line">  OS/Arch:          linux/amd64</span><br><span class="line">  Experimental:     <span class="literal">false</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="三，Docker的操作命令"><a href="#三，Docker的操作命令" class="headerlink" title="三，Docker的操作命令"></a>三，Docker的操作命令</h2><h3 id="3-0-添加docker国内镜像源"><a href="#3-0-添加docker国内镜像源" class="headerlink" title="3.0 添加docker国内镜像源"></a>3.0 添加docker国内镜像源</h3><blockquote>
<p>要添加国内的源地址</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vim /etc/docker/daemon.json</span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /etc/docker/daemon.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;registry-mirrors&quot;</span>:[ <span class="string">&quot;https://registry.docker-cn.com&quot;</span> ]</span><br><span class="line">&#125;</span><br><span class="line">[root@localhost ~]# systemctl daemon-reload</span><br><span class="line">[root@localhost ~]# systemctl restart docker</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-1-Docker命令：search"><a href="#3-1-Docker命令：search" class="headerlink" title="3.1 Docker命令：search"></a>3.1 Docker命令：search</h3><blockquote>
<p>用于从docker的官方公有镜像仓库查找镜像</p>
</blockquote>
<p>（1）查看Docker Hub上公开的centos镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker search centos</span><br><span class="line">NAME                               DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED</span><br><span class="line">centos                             The official build of CentOS.                   4805                [OK]                </span><br><span class="line">ansible/centos7-ansible            Ansible on Centos7                              118                                     [OK]</span><br><span class="line">jdeathe/centos-ssh                 CentOS-6 6.10 x86_64 / CentOS-7 7.5.1804 x86…   99                                      [OK]</span><br><span class="line">consol/centos-xfce-vnc             Centos container with <span class="string">&quot;headless&quot;</span> VNC session…   65                                      [OK]</span><br><span class="line">...以下省略无数行....                     </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">特别说明：</span><br><span class="line">Name：镜像的名字</span><br><span class="line">DESCRIPTION：描述</span><br><span class="line">STARS：星级（越高越好）</span><br><span class="line">OFFICIAL：是否是官方发布的</span><br><span class="line">AUTOMATED:是否自动化的</span><br></pre></td></tr></table></figure>

<p>（2）查找星级多于100的centos镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker search centos -f stars=100</span><br><span class="line">NAME                      DESCRIPTION                     STARS               OFFICIAL            AUTOMATED</span><br><span class="line">centos                    The official build of CentOS.   4805                [OK]                </span><br><span class="line">ansible/centos7-ansible   Ansible on Centos7              118                                     [OK]</span><br><span class="line"></span><br><span class="line">特别提示：</span><br><span class="line">/：符号用于分割作者名称和镜像名称</span><br><span class="line">ansible/centos7-ansible：ansible是作者名称，centos7-ansible是镜像名称</span><br></pre></td></tr></table></figure>

<p>（3）多条件查找–filter</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查找官方发布的，星级大于100的centos镜像</span></span><br><span class="line">[root@localhost ~]# docker search centos --filter is-official=<span class="literal">true</span> --filter stars=100</span><br><span class="line">NAME                DESCRIPTION                     STARS               OFFICIAL            AUTOMATED</span><br><span class="line">centos              The official build of CentOS.   4805                [OK]       </span><br></pre></td></tr></table></figure>

<h3 id="3-2-Docker命令：pull"><a href="#3-2-Docker命令：pull" class="headerlink" title="3.2 Docker命令：pull"></a>3.2 Docker命令：pull</h3><blockquote>
<p>用于从Docker Hub上下载公有镜像</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查找符合条件的hello-world镜像</span></span><br><span class="line">[root@localhost ~]# docker search hello-world --filter is-official=<span class="literal">true</span> --filter stars=100</span><br><span class="line">NAME                DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED</span><br><span class="line">hello-world         Hello World! (an example of minimal Dockeriz…   681                 [OK]    </span><br><span class="line"></span><br><span class="line"><span class="comment">#下载目标hello-world镜像</span></span><br><span class="line">[root@localhost ~]# docker pull hello-world</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/hello-world</span><br><span class="line">d1725b59e92d: Pull complete </span><br><span class="line">Digest: sha256:0add3ace90ecb4adbf7777e9aacf18357296e799f81cabc9fde470971e499788</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> hello-world:latest       <span class="comment">#下载成功latest是标记tag</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#下载目标centos:7镜像</span></span><br><span class="line">[root@localhost ~]# docker pull centos:7        <span class="comment">#网速不好的话，需要点时间耐心等待</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-3-Docker命令：images"><a href="#3-3-Docker命令：images" class="headerlink" title="3.3 Docker命令：images"></a>3.3 Docker命令：images</h3><blockquote>
<p>用于本地镜像的查看</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">hello-world         latest              4ab4c602aa5e        5 weeks ago         1.84kB</span><br><span class="line"></span><br><span class="line">特别说明：</span><br><span class="line">REPOSITORY：镜像仓库（下边罗列的都是本地已有镜像名称）</span><br><span class="line">TAG：镜像的标记（为了区分同名镜像）</span><br><span class="line">IMAGES ID：镜像的ID号</span><br><span class="line">CREATED：此镜像的创建时间</span><br><span class="line">SIZE：此镜像的大小</span><br></pre></td></tr></table></figure>

<h3 id="3-4-Docker命令：build"><a href="#3-4-Docker命令：build" class="headerlink" title="3.4 Docker命令：build"></a>3.4 Docker命令：build</h3><blockquote>
<p>用于本地自定义镜像的构建，需要创建Dockerfile文件</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建Dockerfile文件的存储目录</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mkdir</span> -p /root/dockerfile/lib/centos/7</span><br><span class="line">[root@localhost ~]# <span class="built_in">cd</span> /root/dockerfile/lib/centos/7</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建docker.sh脚本</span></span><br><span class="line">[root@localhost 7]# vim docker.sh</span><br><span class="line">[root@localhost 7]# <span class="built_in">cat</span> docker.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;welcome&quot;</span></span><br><span class="line">    <span class="built_in">sleep</span> 5</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建Dockerfile配置文件，文件名称必须为Dockerfile，第一个字母必须大写</span></span><br><span class="line">[root@localhost 7]# vim Dockerfile</span><br><span class="line">[root@localhost 7]# <span class="built_in">cat</span> Dockerfile </span><br><span class="line">FROM centos         <span class="comment">#从centos源镜像的基础上进行构建</span></span><br><span class="line"></span><br><span class="line">LABEL MAINTATNER=<span class="string">&quot;zhaoshuo&quot;</span>         <span class="comment">#作者的名称</span></span><br><span class="line"></span><br><span class="line">RUN <span class="built_in">ln</span> -sfv /usr/share/zoneinfo/Asia/Shanghai /etc/localtime        <span class="comment">#RUN：在镜像构建过程中运行命令</span></span><br><span class="line">ADD docker.sh /home/test/       <span class="comment">#从本地系统中把docker.sh文件添加到构建中的镜像的/home/test/目录下</span></span><br><span class="line">RUN <span class="built_in">chmod</span> +x /home/test/docker.sh       <span class="comment">#在镜像构建过程中运行命令</span></span><br><span class="line">CMD [<span class="string">&quot;/home/test/docker.sh&quot;</span>]        <span class="comment">#构建镜像完成时，最后执行的命令</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#根据Dockfile配置文件构建一个自定义镜像</span></span><br><span class="line">[root@localhost 7]# docker build -t zhaoshuo/centos7:1 .        <span class="comment">#-t 指定镜像名称  ：1  设定镜像的tag标记</span></span><br><span class="line">Sending build context to Docker daemon  3.072kB</span><br><span class="line">Step 1/6 : FROM centos</span><br><span class="line">latest: Pulling from library/centos</span><br><span class="line">Digest: sha256:67dad89757a55bfdfabec8abd0e22f8c7c12a1856514726470228063ed86593b</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> centos:latest</span><br><span class="line"> ---&gt; 75835a67d134</span><br><span class="line">Step 2/6 : LABEL MAINTATNER=<span class="string">&quot;zhaoshuo&quot;</span></span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 07b9ec2c2b77</span><br><span class="line">Removing intermediate container 07b9ec2c2b77</span><br><span class="line"> ---&gt; 8af9c0b32fec</span><br><span class="line">Step 3/6 : RUN <span class="built_in">ln</span> -sfv /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> aeb9baee5588</span><br><span class="line"><span class="string">&#x27;/etc/localtime&#x27;</span> -&gt; <span class="string">&#x27;/usr/share/zoneinfo/Asia/Shanghai&#x27;</span></span><br><span class="line">Removing intermediate container aeb9baee5588</span><br><span class="line"> ---&gt; 3e7396341559</span><br><span class="line">Step 4/6 : ADD docker.sh /home/test/</span><br><span class="line"> ---&gt; 55b4caef0d35</span><br><span class="line">Step 5/6 : RUN <span class="built_in">chmod</span> +x /home/test/docker.sh</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 6d8035f7ddeb</span><br><span class="line">Removing intermediate container 6d8035f7ddeb</span><br><span class="line"> ---&gt; 69498dec7fae</span><br><span class="line">Step 6/6 : CMD [<span class="string">&quot;/home/test/docker.sh&quot;</span>]</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 2a823763ffe9</span><br><span class="line">Removing intermediate container 2a823763ffe9</span><br><span class="line"> ---&gt; a456dd68d802</span><br><span class="line">Successfully built a456dd68d802         <span class="comment">#构建成功</span></span><br><span class="line">Successfully tagged zhaoshuo/centos7:1</span><br><span class="line"></span><br><span class="line">[root@localhost 7]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        57 seconds ago      200MB       <span class="comment">#TAG为1</span></span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line">hello-world         latest              4ab4c602aa5e        5 weeks ago         1.84kB</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-5-Docker命令：run"><a href="#3-5-Docker命令：run" class="headerlink" title="3.5 Docker命令：run"></a>3.5 Docker命令：run</h3><blockquote>
<p>运行一个本地镜像</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 7]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        57 seconds ago      200MB       </span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line">hello-world         latest              4ab4c602aa5e        5 weeks ago         1.84kB</span><br><span class="line">[root@localhost 7]# docker run -d -it a456dd68d802 /bin/bash</span><br><span class="line">5e993afbfc0f4b1b421f2414cb890a492c562a2306401e03796dfccc6b0f7c4b</span><br><span class="line"></span><br><span class="line">特别提示：</span><br><span class="line">docker run：运行一个指定的images <span class="built_in">id</span></span><br><span class="line">-d：放在后台运行</span><br><span class="line">-i：可以进行命令交互</span><br><span class="line">-t：制作一个伪终端用于登陆</span><br><span class="line">a456dd68d802:镜像的ID，可以简写成a45</span><br></pre></td></tr></table></figure>

<h3 id="3-6-Docker命令：ps"><a href="#3-6-Docker命令：ps" class="headerlink" title="3.6 Docker命令：ps"></a>3.6 Docker命令：ps</h3><blockquote>
<p>查看已经运行的镜像的进程</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 7]# docker ps -a        <span class="comment">#查看所有运行的镜像进程（包含退出的exit）</span></span><br><span class="line">CONTAINER ID      IMAGE         COMMAND        CREATED        STATUS       PORTS      NAMES</span><br><span class="line">5e993afbfc0f   a456dd68d802    <span class="string">&quot;/bin/bash&quot;</span>   2 minutes ago   Up 2 minutes          reverent_euclid</span><br><span class="line"></span><br><span class="line">特别提示：</span><br><span class="line">STATUS：进程的状态，UP表示正在运行中，EXIT表示已经退出了。</span><br></pre></td></tr></table></figure>

<h3 id="3-7-Docker命令：attach"><a href="#3-7-Docker命令：attach" class="headerlink" title="3.7 Docker命令：attach"></a>3.7 Docker命令：attach</h3><blockquote>
<p>从本地系统中切入到某个STATUS状态是UP的镜像进程里</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID      IMAGE         COMMAND        CREATED        STATUS       PORTS      NAMES</span><br><span class="line">5e993afbfc0f   a456dd68d802    <span class="string">&quot;/bin/bash&quot;</span>   2 minutes ago   Up 2 minutes          reverent_euclid</span><br><span class="line"></span><br><span class="line">[root@localhost 7]# docker attach 5e993afbfc0f          <span class="comment">#切入到容器号为5e993afbfc0f的镜像进程里</span></span><br><span class="line">[root@5e993afbfc0f /]# <span class="built_in">ls</span>       <span class="comment">#已经进入容器里了</span></span><br><span class="line">anaconda-post.log  dev  home  lib64  mnt  proc  run   srv  tmp  var</span><br><span class="line">bin                etc  lib   media  opt  root  sbin  sys  usr</span><br><span class="line">[root@5e993afbfc0f /]# <span class="built_in">exit</span>     <span class="comment">#退出容器</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">[root@localhost 7]# docker ps -a        <span class="comment">#容器的进程的STATUS已经处于EXIT状态（之前是后台运行的，切入进去后执行exit就等于手动退出了）</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES</span><br><span class="line">5e993afbfc0f        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         5 minutes ago       Exited (0) 10 seconds ago                       reverent_euclid</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-8-Docker命令：stop"><a href="#3-8-Docker命令：stop" class="headerlink" title="3.8 Docker命令：stop"></a>3.8 Docker命令：stop</h3><blockquote>
<p>用于停止一个正在运行着的容器进程</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                          PORTS               NAMES</span><br><span class="line">5e993afbfc0f        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         6 minutes ago       Exited (0) About a minute ago                       reverent_euclid</span><br><span class="line"></span><br><span class="line"><span class="comment">#再次在后台启动一个镜像</span></span><br><span class="line">[root@localhost 7]# docker run -d -it a456dd68d802 /bin/bash</span><br><span class="line">af5a8cfcfe5ba25d2149441af123730db07105953dd9afa79827457d6e2c2e59</span><br><span class="line">[root@localhost 7]# docker ps -a        <span class="comment">#增加了一个容器进程</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         3 seconds ago       Up 2 seconds                                   xenodochial_colden</span><br><span class="line">5e993afbfc0f        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         7 minutes ago       Exited (0) 2 minutes ago                       reverent_euclid</span><br><span class="line"></span><br><span class="line"><span class="comment">#停止一个运行着的容器进程</span></span><br><span class="line">[root@localhost 7]# docker stop af5a8cfcfe5b</span><br><span class="line">af5a8cfcfe5b</span><br><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED              STATUS                       PORTS               NAMES</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         About a minute ago   Exited (137) 3 seconds ago                       xenodochial_colden</span><br><span class="line">5e993afbfc0f        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         8 minutes ago        Exited (0) 3 minutes ago                         reverent_euclid</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-9-Docker命令：start"><a href="#3-9-Docker命令：start" class="headerlink" title="3.9 Docker命令：start"></a>3.9 Docker命令：start</h3><blockquote>
<p>用于启动一个已经停止了的容器进程</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                        PORTS               NAMES</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         2 minutes ago       Exited (137) 44 seconds ago                       xenodochial_colden</span><br><span class="line">5e993afbfc0f        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         9 minutes ago       Exited (0) 4 minutes ago                          reverent_euclid</span><br><span class="line">[root@localhost 7]# docker start af5a8cfcfe5b</span><br><span class="line">af5a8cfcfe5b</span><br><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         2 minutes ago       Up 2 seconds                                   xenodochial_colden</span><br><span class="line">5e993afbfc0f        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         9 minutes ago       Exited (0) 4 minutes ago                       reverent_euclid</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-10-Docker命令：rm"><a href="#3-10-Docker命令：rm" class="headerlink" title="3.10 Docker命令：rm"></a>3.10 Docker命令：rm</h3><blockquote>
<p>用于删除一个已经停止了的容器进程</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         3 minutes ago       Up About a minute                              xenodochial_colden</span><br><span class="line">5e993afbfc0f        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         10 minutes ago      Exited (0) 5 minutes ago                       reverent_euclid</span><br><span class="line">[root@localhost ~]# docker <span class="built_in">rm</span> 5e993afbfc0f</span><br><span class="line">5e993afbfc0f</span><br><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         3 minutes ago       Up About a minute                       xenodochial_colden</span><br><span class="line">[root@localhost ~]# docker <span class="built_in">rm</span> af5a8cfcfe5b      <span class="comment">#注意运行中的容器进程需要先stop，才能删除</span></span><br><span class="line">Error response from daemon: You cannot remove a running container af5a8cfcfe5ba25d2149441af123730db07105953dd9afa79827457d6e2c2e59. Stop the container before attempting removal or force remove</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-11-Docker命令：rmi"><a href="#3-11-Docker命令：rmi" class="headerlink" title="3.11 Docker命令：rmi"></a>3.11 Docker命令：rmi</h3><blockquote>
<p>用于删除一个未用作容器启动的本地镜像</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        36 minutes ago      200MB</span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line">hello-world         latest              4ab4c602aa5e        5 weeks ago         1.84kB</span><br><span class="line">[root@localhost ~]# docker rmi -f 4ab4c602aa5e      <span class="comment">#-f 强制删除（即便被占用）</span></span><br><span class="line">Untagged: hello-world:latest</span><br><span class="line">Untagged: hello-world@sha256:0add3ace90ecb4adbf7777e9aacf18357296e799f81cabc9fde470971e499788</span><br><span class="line">Deleted: sha256:4ab4c602aa5eed5528a6620ff18a1dc4faef0e1ab3a5eddeddb410714478c67f</span><br><span class="line">Deleted: sha256:428c97da766c4c13b19088a471de6b622b038f3ae8efa10ec5a37d6d31a2df0b</span><br><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        37 minutes ago      200MB</span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line">[root@localhost ~]# docker rmi a456dd68d802         <span class="comment">#但要注意，被用作容器启动的镜像是不能删除的（需先rm删除容器进程）</span></span><br><span class="line">Error response from daemon: conflict: unable to delete a456dd68d802 (cannot be forced) - image is being used by running container af5a8cfcfe5b</span><br><span class="line">[root@localhost ~]# docker rmi -f a456dd68d802      <span class="comment">#强行删除被容器进程占用的镜像也是不行的</span></span><br><span class="line">Error response from daemon: conflict: unable to delete a456dd68d802 (cannot be forced) - image is being used by running container af5a8cfcfe5b</span><br><span class="line">[root@localhost ~]# docker ps -a        <span class="comment">#查看容器进程，被占用中</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         6 minutes ago       Up 3 minutes                            xenodochial_colden</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-12-Docker命令：commit"><a href="#3-12-Docker命令：commit" class="headerlink" title="3.12 Docker命令：commit"></a>3.12 Docker命令：commit</h3><blockquote>
<p>将一个更改过的容器进程的容器状态保存为一个新的镜像</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker ps -a        <span class="comment">#查看启动的容器进程</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         10 minutes ago      Up 8 minutes                            xenodochial_colden</span><br><span class="line">[root@localhost ~]# docker attach af5a8cfcfe5b      <span class="comment">#切入容器进程</span></span><br><span class="line"></span><br><span class="line">[root@af5a8cfcfe5b /]# <span class="built_in">ls</span></span><br><span class="line">anaconda-post.log  dev  home  lib64  mnt  proc  run   srv  tmp  var</span><br><span class="line">bin                etc  lib   media  opt  root  sbin  sys  usr</span><br><span class="line">[root@af5a8cfcfe5b /]# <span class="built_in">mkdir</span> yunjisuan      <span class="comment">#在容器进程里创建yunjisuan目录</span></span><br><span class="line">[root@af5a8cfcfe5b /]# <span class="built_in">ls</span></span><br><span class="line">anaconda-post.log  dev  home  lib64  mnt  proc  run   srv  tmp  var</span><br><span class="line">bin                etc  lib   media  opt  root  sbin  sys  usr  yunjisuan</span><br><span class="line"></span><br><span class="line">[root@af5a8cfcfe5b /]# <span class="built_in">exit</span>     <span class="comment">#退出容器进程</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         25 minutes ago      Exited (0) 4 seconds ago                       xenodochial_colden</span><br><span class="line">[root@localhost ~]# docker commit af5a8cfcfe5b zhaoshuo/centos:2        <span class="comment">#将更改后的容器进程保存为一个新的镜像</span></span><br><span class="line">sha256:d396465fd814d049063325b5f6c752e9cd0da0821ff42d9400c2a90ba2a42c5b</span><br><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos     2                   d396465fd814        5 seconds ago       200MB</span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        About an hour ago   200MB</span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动新保存的镜像</span></span><br><span class="line">[root@localhost ~]# docker run -d -it d396465fd814 /bin/bash</span><br><span class="line">06b28d43f70046b002a37a6431b658b0455dc261c4f55dd4f010c5aadde31f0e</span><br><span class="line">[root@localhost ~]# docker ps -a        <span class="comment">#查看新镜像的容器进程</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES</span><br><span class="line">06b28d43f700        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>         9 seconds ago       Up 9 seconds                                   loving_jepsen</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         27 minutes ago      Exited (0) 2 minutes ago                       xenodochial_colden</span><br><span class="line">[root@localhost ~]# docker attach 06b28d43f700      <span class="comment">#切入新镜像的容器进程</span></span><br><span class="line">[root@06b28d43f700 /]# <span class="built_in">ls</span>       <span class="comment">#之前创建的目录仍旧存在</span></span><br><span class="line">anaconda-post.log  dev  home  lib64  mnt  proc  run   srv  tmp  var</span><br><span class="line">bin                etc  lib   media  opt  root  sbin  sys  usr  yunjisuan</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-13-Docker命令：exec"><a href="#3-13-Docker命令：exec" class="headerlink" title="3.13 Docker命令：exec"></a>3.13 Docker命令：exec</h3><blockquote>
<p>用于从本地操作系统上直接向容器进程发布执行命令并返回结果</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES</span><br><span class="line">06b28d43f700        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>         2 minutes ago       Up 7 seconds                                   loving_jepsen</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         29 minutes ago      Exited (0) 4 minutes ago                       xenodochial_colden</span><br><span class="line">[root@localhost ~]# docker <span class="built_in">exec</span> 06b28d43f700 <span class="built_in">ls</span> /tmp        <span class="comment">#查看容器进程里的/tmp目录下所有内容</span></span><br><span class="line">ks-script-7RxiSx</span><br><span class="line">yum.log</span><br><span class="line">[root@localhost ~]# docker <span class="built_in">exec</span> 06b28d43f700 <span class="built_in">ls</span> -d /yunjisuan       <span class="comment">#查看容器进程里/yunjisuan目录</span></span><br><span class="line">/yunjisuan</span><br><span class="line"></span><br><span class="line">docker <span class="built_in">exec</span> -it ee782b37bb82 bash           <span class="comment">#进入到容器里面</span></span><br></pre></td></tr></table></figure>

<h3 id="3-14-Docker命令：cp"><a href="#3-14-Docker命令：cp" class="headerlink" title="3.14 Docker命令：cp"></a>3.14 Docker命令：cp</h3><blockquote>
<p>用于在容器进程和本地系统之间复制文件</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES</span><br><span class="line">06b28d43f700        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>         31 minutes ago      Up 29 minutes                                   loving_jepsen</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         About an hour ago   Exited (0) 33 minutes ago                       xenodochial_colden</span><br><span class="line">[root@localhost ~]# docker <span class="built_in">exec</span> 06b28d43f700 <span class="built_in">ls</span> /tmp        <span class="comment">#向容器进程发布命令</span></span><br><span class="line">ks-script-7RxiSx</span><br><span class="line">yum.log</span><br><span class="line">[root@localhost ~]# docker <span class="built_in">cp</span> 06b28d43f700:/tmp/yum.log .       <span class="comment">#将指定容器进程的/tmp/yum.log复制到当前目录下</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">ls</span>      <span class="comment">#已经复制过来了</span></span><br><span class="line">anaconda-ks.cfg  dockerfile  wordpress-4.7.4-zh_CN.tar.gz  yum.log</span><br><span class="line">[root@localhost ~]# docker <span class="built_in">cp</span> anaconda-ks.cfg 06b28d43f700:/tmp/        <span class="comment">#将本地文件复制到容器进程里</span></span><br><span class="line">[root@localhost ~]# docker <span class="built_in">exec</span> 06b28d43f700 <span class="built_in">ls</span> /tmp</span><br><span class="line">anaconda-ks.cfg      <span class="comment">#复制成功 </span></span><br><span class="line">ks-script-7RxiSx</span><br><span class="line">yum.log</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-15-Docker命令：create"><a href="#3-15-Docker命令：create" class="headerlink" title="3.15 Docker命令：create"></a>3.15 Docker命令：create</h3><blockquote>
<p>用于创建一个容器进程，但是并不启动它</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos     2                   d396465fd814        About an hour ago   200MB</span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        2 hours ago         200MB</span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line">[root@localhost ~]# docker create -it d396465fd814      <span class="comment">#创建一个镜像的容器进程，但不直接启动</span></span><br><span class="line">5969d37135488e62ca32073163b86eb8bafc2d86854b16df58ae01ce858d3c7a</span><br><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                         PORTS               NAMES</span><br><span class="line">5969d3713548        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>         8 seconds ago       Created                                            optimistic_lewin       <span class="comment">#创建状态并未启动</span></span><br><span class="line">06b28d43f700        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>         About an hour ago   Up About an hour                                   loving_jepsen</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         2 hours ago         Exited (0) About an hour ago                       xenodochial_colden</span><br><span class="line">[root@localhost ~]# docker start 5969d3713548       <span class="comment">#启动容器进程</span></span><br><span class="line">5969d3713548</span><br><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                         PORTS               NAMES</span><br><span class="line">5969d3713548        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>         46 seconds ago      Up 1 second                                        optimistic_lewin</span><br><span class="line">06b28d43f700        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>         About an hour ago   Up About an hour                                   loving_jepsen</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         2 hours ago         Exited (0) About an hour ago                       xenodochial_colden</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-16-Docker命令：diff"><a href="#3-16-Docker命令：diff" class="headerlink" title="3.16 Docker命令：diff"></a>3.16 Docker命令：diff</h3><blockquote>
<p>查看容器进程与源镜像做对比，发生了改变的文件或文件夹</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                         PORTS               NAMES</span><br><span class="line">5969d3713548        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>         2 minutes ago       Up About a minute                                  optimistic_lewin</span><br><span class="line">06b28d43f700        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>         About an hour ago   Up About an hour                                   loving_jepsen</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         2 hours ago         Exited (0) About an hour ago                       xenodochial_colden</span><br><span class="line">[root@localhost ~]# docker attach 5969d3713548      <span class="comment">#切入容器进程</span></span><br><span class="line">[root@5969d3713548 /]# <span class="built_in">cd</span> /yunjisuan/</span><br><span class="line">[root@5969d3713548 yunjisuan]# <span class="built_in">pwd</span>          </span><br><span class="line">/yunjisuan</span><br><span class="line">[root@5969d3713548 yunjisuan]# <span class="built_in">touch</span> &#123;1..10&#125;        <span class="comment">#在容器进程中创建文件</span></span><br><span class="line">[root@5969d3713548 yunjisuan]# <span class="built_in">ls</span></span><br><span class="line">1  10  2  3  4  5  6  7  8  9</span><br><span class="line">[root@5969d3713548 yunjisuan]# <span class="built_in">exit</span>                 <span class="comment">#退出容器进程</span></span><br><span class="line"><span class="built_in">exit</span>    </span><br><span class="line">[root@localhost ~]# docker diff 5969d3713548        <span class="comment">#查看容器进程的变化</span></span><br><span class="line">C /root</span><br><span class="line">C /root/.bash_history</span><br><span class="line">C /yunjisuan</span><br><span class="line">A /yunjisuan/1</span><br><span class="line">A /yunjisuan/7</span><br><span class="line">A /yunjisuan/3</span><br><span class="line">A /yunjisuan/4</span><br><span class="line">A /yunjisuan/5</span><br><span class="line">A /yunjisuan/6</span><br><span class="line">A /yunjisuan/8</span><br><span class="line">A /yunjisuan/9</span><br><span class="line">A /yunjisuan/10</span><br><span class="line">A /yunjisuan/2</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-17-Docker命令：events"><a href="#3-17-Docker命令：events" class="headerlink" title="3.17 Docker命令：events"></a>3.17 Docker命令：events</h3><blockquote>
<p>时时监测容器的变化情况</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker events</span><br><span class="line">2018-10-14T00:23:29.522641941+08:00 container <span class="built_in">kill</span> 06b28d43f70046b002a37a6431b658b0455dc261c4f55dd4f010c5aadde31f0e (MAINTATNER=zhaoshuo, image=d396465fd814, name=loving_jepsen, org.label-schema.build-date=20181006, org.label-schema.license=GPLv2, org.label-schema.name=CentOS Base Image, org.label-schema.schema-version=1.0, org.label-schema.vendor=CentOS, signal=15)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>前台时时监控容器的变化若要检测，需要另外再起一个窗口进行操作</p>
</blockquote>
<h3 id="3-18-Docker命令：export"><a href="#3-18-Docker命令：export" class="headerlink" title="3.18 Docker命令：export"></a>3.18 Docker命令：export</h3><blockquote>
<p>将容器进程的文件系统导出到本地</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                         PORTS               NAMES</span><br><span class="line">5969d3713548        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>         7 minutes ago       Exited (0) 3 minutes ago                           optimistic_lewin</span><br><span class="line">06b28d43f700        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>         About an hour ago   Exited (137) 37 seconds ago                        loving_jepsen</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         2 hours ago         Exited (0) About an hour ago                       xenodochial_colden</span><br><span class="line">[root@localhost ~]# docker start 596            <span class="comment">#启动一个容器进程</span></span><br><span class="line">596</span><br><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                         PORTS               NAMES</span><br><span class="line">5969d3713548        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>         7 minutes ago       Up 3 seconds                                       optimistic_lewin</span><br><span class="line">06b28d43f700        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>         About an hour ago   Exited (137) 54 seconds ago                        loving_jepsen</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         2 hours ago         Exited (0) About an hour ago                       xenodochial_colden</span><br><span class="line">[root@localhost ~]# docker <span class="built_in">export</span> 5969d3713548 &gt; test.tar       <span class="comment">#将容器进程导出成一个tar包</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">ls</span></span><br><span class="line">anaconda-ks.cfg  dockerfile  test.tar  wordpress-4.7.4-zh_CN.tar.gz  yum.log</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-19-Docker命令：import"><a href="#3-19-Docker命令：import" class="headerlink" title="3.19 Docker命令：import"></a>3.19 Docker命令：import</h3><blockquote>
<p>用于将export导出的文件系统创建为一个镜像</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# <span class="built_in">ls</span></span><br><span class="line">anaconda-ks.cfg  dockerfile  test.tar  wordpress-4.7.4-zh_CN.tar.gz  yum.log</span><br><span class="line">[root@localhost ~]# docker import test.tar zhaoshuo/centos:3</span><br><span class="line">sha256:0ac5e5b6feadedc5f47130d165cc911fc6170cc1423abe45d74abf67ec3c29b6</span><br><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos     3                   0ac5e5b6fead        12 seconds ago      200MB</span><br><span class="line">zhaoshuo/centos     2                   d396465fd814        About an hour ago   200MB</span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        2 hours ago         200MB</span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-20-Docker命令：history"><a href="#3-20-Docker命令：history" class="headerlink" title="3.20 Docker命令：history"></a>3.20 Docker命令：history</h3><blockquote>
<p>用于查看一个镜像的历史修改纪录</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos     3                   0ac5e5b6fead        40 seconds ago      200MB</span><br><span class="line">zhaoshuo/centos     2                   d396465fd814        About an hour ago   200MB</span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        2 hours ago         200MB</span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line">[root@localhost ~]# docker <span class="built_in">history</span> 0ac5e5b6fead</span><br><span class="line">IMAGE               CREATED              CREATED BY          SIZE                COMMENT</span><br><span class="line">0ac5e5b6fead        About a minute ago                       200MB               Imported from -</span><br><span class="line">[root@localhost ~]# docker <span class="built_in">history</span> d396465fd814</span><br><span class="line">IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT</span><br><span class="line">d396465fd814        About an hour ago   /bin/bash                                       27B                 </span><br><span class="line">a456dd68d802        2 hours ago         /bin/sh -c <span class="comment">#(nop)  CMD [&quot;/home/test/docker.s…   0B                  </span></span><br><span class="line">69498dec7fae        2 hours ago         /bin/sh -c <span class="built_in">chmod</span> +x /home/test/docker.sh        63B                 </span><br><span class="line">55b4caef0d35        2 hours ago         /bin/sh -c <span class="comment">#(nop) ADD file:5bd1c2d39928ac84c…   63B                 </span></span><br><span class="line">3e7396341559        2 hours ago         /bin/sh -c <span class="built_in">ln</span> -sfv /usr/share/zoneinfo/Asia/…   33B                 </span><br><span class="line">8af9c0b32fec        2 hours ago         /bin/sh -c <span class="comment">#(nop)  LABEL MAINTATNER=zhaoshuo    0B                  </span></span><br><span class="line">75835a67d134        3 days ago          /bin/sh -c <span class="comment">#(nop)  CMD [&quot;/bin/bash&quot;]            0B                  </span></span><br><span class="line">&lt;missing&gt;           3 days ago          /bin/sh -c <span class="comment">#(nop)  LABEL org.label-schema.sc…   0B                  </span></span><br><span class="line">&lt;missing&gt;           3 days ago          /bin/sh -c <span class="comment">#(nop) ADD file:fbe9badfd2790f074…   200MB   </span></span><br></pre></td></tr></table></figure>

<h3 id="3-21-Docker命令：info"><a href="#3-21-Docker命令：info" class="headerlink" title="3.21 Docker命令：info"></a>3.21 Docker命令：info</h3><blockquote>
<p>用于查看当前操作系统的docker运行信息</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker info</span><br><span class="line">Containers: 3       <span class="comment">#容器进程3个</span></span><br><span class="line"> Running: 1         <span class="comment">#正在运行状态的容器1个</span></span><br><span class="line"> Paused: 0</span><br><span class="line"> Stopped: 2</span><br><span class="line">Images: 8           <span class="comment">#一共有8个镜像</span></span><br><span class="line">Server Version: 18.06.1-ce</span><br><span class="line">Storage Driver: overlay2</span><br><span class="line"> Backing Filesystem: xfs</span><br><span class="line"> Supports d_type: <span class="literal">true</span></span><br><span class="line"> Native Overlay Diff: <span class="literal">true</span></span><br><span class="line">Logging Driver: json-file</span><br><span class="line">Cgroup Driver: cgroupfs</span><br><span class="line">Plugins:</span><br><span class="line"> Volume: <span class="built_in">local</span></span><br><span class="line"> Network: bridge host macvlan null overlay</span><br><span class="line"> Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog</span><br><span class="line">Swarm: inactive</span><br><span class="line">Runtimes: runc</span><br><span class="line">Default Runtime: runc</span><br><span class="line">Init Binary: docker-init</span><br><span class="line">containerd version: 468a545b9edcd5932818eb9de8e72413e616e86e</span><br><span class="line">runc version: 69663f0bd4b60df09991c08812a60108003fa340</span><br><span class="line">init version: fec3683</span><br><span class="line">Security Options:</span><br><span class="line"> seccomp</span><br><span class="line">  Profile: default</span><br><span class="line">Kernel Version: 3.10.0-862.el7.x86_64</span><br><span class="line">Operating System: CentOS Linux 7 (Core)</span><br><span class="line">OSType: linux</span><br><span class="line">Architecture: x86_64</span><br><span class="line">CPUs: 1</span><br><span class="line">Total Memory: 974.6MiB</span><br><span class="line">Name: localhost.localdomain</span><br><span class="line">ID: MUQB:NDRG:NF4L:KCWN:2WKA:DVZ2:CJKJ:CBFO:MP5J:XSIK:CTZO:SJJY</span><br><span class="line">Docker Root Dir: /var/lib/docker</span><br><span class="line">Debug Mode (client): <span class="literal">false</span></span><br><span class="line">Debug Mode (server): <span class="literal">false</span></span><br><span class="line">Registry: https://index.docker.io/v1/</span><br><span class="line">Labels:</span><br><span class="line">Experimental: <span class="literal">false</span></span><br><span class="line">Insecure Registries:</span><br><span class="line"> 127.0.0.0/8</span><br><span class="line">Registry Mirrors:</span><br><span class="line"> https://registry.docker-cn.com/</span><br><span class="line">Live Restore Enabled: <span class="literal">false</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-22-Docker命令：inspect"><a href="#3-22-Docker命令：inspect" class="headerlink" title="3.22 Docker命令：inspect"></a>3.22 Docker命令：inspect</h3><blockquote>
<p>查看某个镜像的详细信息</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos     3                   0ac5e5b6fead        2 minutes ago       200MB</span><br><span class="line">zhaoshuo/centos     2                   d396465fd814        About an hour ago   200MB</span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        2 hours ago         200MB</span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line">[root@localhost ~]# docker inspect 0ac5e5b6fead</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;Id&quot;</span>: <span class="string">&quot;sha256:0ac5e5b6feadedc5f47130d165cc911fc6170cc1423abe45d74abf67ec3c29b6&quot;</span>,</span><br><span class="line">        <span class="string">&quot;RepoTags&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;zhaoshuo/centos:3&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;RepoDigests&quot;</span>: [],</span><br><span class="line">        <span class="string">&quot;Parent&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Comment&quot;</span>: <span class="string">&quot;Imported from -&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Created&quot;</span>: <span class="string">&quot;2018-10-13T16:26:34.706635044Z&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Container&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;ContainerConfig&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;Hostname&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Domainname&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;User&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;AttachStdin&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="string">&quot;AttachStdout&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="string">&quot;AttachStderr&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="string">&quot;Tty&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="string">&quot;OpenStdin&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="string">&quot;StdinOnce&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="string">&quot;Env&quot;</span>: null,</span><br><span class="line">            <span class="string">&quot;Cmd&quot;</span>: null,</span><br><span class="line">            <span class="string">&quot;Image&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Volumes&quot;</span>: null,</span><br><span class="line">            <span class="string">&quot;WorkingDir&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Entrypoint&quot;</span>: null,</span><br><span class="line">            <span class="string">&quot;OnBuild&quot;</span>: null,</span><br><span class="line">            <span class="string">&quot;Labels&quot;</span>: null</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;DockerVersion&quot;</span>: <span class="string">&quot;18.06.1-ce&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Author&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Config&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;Hostname&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Domainname&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;User&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;AttachStdin&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="string">&quot;AttachStdout&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="string">&quot;AttachStderr&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="string">&quot;Tty&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="string">&quot;OpenStdin&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="string">&quot;StdinOnce&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="string">&quot;Env&quot;</span>: null,</span><br><span class="line">            <span class="string">&quot;Cmd&quot;</span>: null,</span><br><span class="line">            <span class="string">&quot;Image&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Volumes&quot;</span>: null,</span><br><span class="line">            <span class="string">&quot;WorkingDir&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Entrypoint&quot;</span>: null,</span><br><span class="line">            <span class="string">&quot;OnBuild&quot;</span>: null,</span><br><span class="line">            <span class="string">&quot;Labels&quot;</span>: null</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;Architecture&quot;</span>: <span class="string">&quot;amd64&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Os&quot;</span>: <span class="string">&quot;linux&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Size&quot;</span>: 200375235,</span><br><span class="line">        <span class="string">&quot;VirtualSize&quot;</span>: 200375235,</span><br><span class="line">        <span class="string">&quot;GraphDriver&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;Data&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;MergedDir&quot;</span>: <span class="string">&quot;/var/lib/docker/overlay2/1ce82fb0cc05791fa02aa4d77f4bc34001c725f16d5389b36540e9bef1fb05b5/merged&quot;</span>,</span><br><span class="line">                <span class="string">&quot;UpperDir&quot;</span>: <span class="string">&quot;/var/lib/docker/overlay2/1ce82fb0cc05791fa02aa4d77f4bc34001c725f16d5389b36540e9bef1fb05b5/diff&quot;</span>,</span><br><span class="line">                <span class="string">&quot;WorkDir&quot;</span>: <span class="string">&quot;/var/lib/docker/overlay2/1ce82fb0cc05791fa02aa4d77f4bc34001c725f16d5389b36540e9bef1fb05b5/work&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;Name&quot;</span>: <span class="string">&quot;overlay2&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;RootFS&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;Type&quot;</span>: <span class="string">&quot;layers&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Layers&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;sha256:2a18295dfc1f31d9fc66201ce7c08e5a84e65f514bae0ae4fcbcf38cdd541659&quot;</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;Metadata&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;LastTagTime&quot;</span>: <span class="string">&quot;2018-10-14T00:26:36.091455174+08:00&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-23-Docker命令：kill"><a href="#3-23-Docker命令：kill" class="headerlink" title="3.23 Docker命令：kill"></a>3.23 Docker命令：kill</h3><blockquote>
<p>强行停止一个或多个正在运行状态的容器进程</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                         PORTS               NAMES</span><br><span class="line">5969d3713548        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>         13 minutes ago      Up 5 minutes                                       optimistic_lewin</span><br><span class="line">06b28d43f700        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>         About an hour ago   Exited (137) 6 minutes ago                         loving_jepsen</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         2 hours ago         Exited (0) About an hour ago                       xenodochial_colden</span><br><span class="line">[root@localhost ~]# docker <span class="built_in">kill</span> 5969d3713548</span><br><span class="line">5969d3713548</span><br><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                       PORTS               NAMES</span><br><span class="line">5969d3713548        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>         14 minutes ago      Exited (137) 1 second ago                        optimistic_lewin</span><br><span class="line">06b28d43f700        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>         About an hour ago   Exited (137) 7 minutes ago                       loving_jepsen</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         2 hours ago         Exited (0) 2 hours ago                           xenodochial_colden</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-24-Docker命令：save"><a href="#3-24-Docker命令：save" class="headerlink" title="3.24 Docker命令：save"></a>3.24 Docker命令：save</h3><blockquote>
<p>用于将一个镜像的文件系统导出到本地（export导出的是容器）</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#重新build一个镜像</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cd</span> dockerfile/lib/centos/7/</span><br><span class="line">[root@localhost 7]# docker build -t <span class="built_in">test</span>:1 .</span><br><span class="line">Sending build context to Docker daemon  3.072kB</span><br><span class="line">Step 1/6 : FROM centos</span><br><span class="line"> ---&gt; 75835a67d134</span><br><span class="line">Step 2/6 : LABEL MAINTATNER=<span class="string">&quot;zhaoshuo&quot;</span></span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 8af9c0b32fec</span><br><span class="line">Step 3/6 : RUN <span class="built_in">ln</span> -sfv /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 3e7396341559</span><br><span class="line">Step 4/6 : ADD docker.sh /home/test/</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 55b4caef0d35</span><br><span class="line">Step 5/6 : RUN <span class="built_in">chmod</span> +x /home/test/docker.sh</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 69498dec7fae</span><br><span class="line">Step 6/6 : CMD [<span class="string">&quot;/home/test/docker.sh&quot;</span>]</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; a456dd68d802</span><br><span class="line">Successfully built a456dd68d802</span><br><span class="line">Successfully tagged <span class="built_in">test</span>:1</span><br><span class="line">[root@localhost 7]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos     3                   0ac5e5b6fead        5 minutes ago       200MB</span><br><span class="line">zhaoshuo/centos     2                   d396465fd814        2 hours ago         200MB</span><br><span class="line"><span class="built_in">test</span>                1                   a456dd68d802        2 hours ago         200MB</span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        2 hours ago         200MB</span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line">[root@localhost 7]# docker save <span class="built_in">test</span>:1 &gt; test.tar           <span class="comment">#save导出test：1这个镜像（也可以用id号）</span></span><br><span class="line">[root@localhost 7]# <span class="built_in">ls</span></span><br><span class="line">Dockerfile  docker.sh  test.tar</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-25-Docker命令：load"><a href="#3-25-Docker命令：load" class="headerlink" title="3.25 Docker命令：load"></a>3.25 Docker命令：load</h3><blockquote>
<p>用于将save导出到本地的tar包，重新加载为镜像（和源镜像的名字标识完全一样）</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 7]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos     3                   0ac5e5b6fead        7 minutes ago       200MB</span><br><span class="line">zhaoshuo/centos     2                   d396465fd814        2 hours ago         200MB</span><br><span class="line"><span class="built_in">test</span>                1                   a456dd68d802        3 hours ago         200MB</span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        3 hours ago         200MB</span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line">[root@localhost 7]# docker rmi <span class="built_in">test</span>:1       <span class="comment">#删除镜像test：1</span></span><br><span class="line">Untagged: <span class="built_in">test</span>:1</span><br><span class="line">[root@localhost 7]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos     3                   0ac5e5b6fead        8 minutes ago       200MB</span><br><span class="line">zhaoshuo/centos     2                   d396465fd814        2 hours ago         200MB</span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        3 hours ago         200MB</span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line">[root@localhost 7]# docker load &lt; test.tar      <span class="comment">#将之前test：1这个镜像的save备份导入系统</span></span><br><span class="line">Loaded image: <span class="built_in">test</span>:1</span><br><span class="line">[root@localhost 7]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos     3                   0ac5e5b6fead        8 minutes ago       200MB</span><br><span class="line">zhaoshuo/centos     2                   d396465fd814        2 hours ago         200MB</span><br><span class="line"><span class="built_in">test</span>                1                   a456dd68d802        3 hours ago         200MB       <span class="comment">#和原来的镜像完全一样</span></span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        3 hours ago         200MB</span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-26-Docker命令：logs"><a href="#3-26-Docker命令：logs" class="headerlink" title="3.26 Docker命令：logs"></a>3.26 Docker命令：logs</h3><blockquote>
<p>用于输出一个容器进程内的操作日志</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 7]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos     3                   0ac5e5b6fead        19 minutes ago      200MB</span><br><span class="line">zhaoshuo/centos     2                   d396465fd814        2 hours ago         200MB</span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        3 hours ago         200MB</span><br><span class="line"><span class="built_in">test</span>                1                   a456dd68d802        3 hours ago         200MB</span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                        PORTS               NAMES</span><br><span class="line">5969d3713548        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>         29 minutes ago      Exited (137) 15 minutes ago                       optimistic_lewin</span><br><span class="line">06b28d43f700        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>         2 hours ago         Exited (137) 22 minutes ago                       loving_jepsen</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>         2 hours ago         Exited (0) 2 hours ago                            xenodochial_colden</span><br><span class="line">[root@localhost 7]# docker run -d -it <span class="built_in">test</span>:1</span><br><span class="line">28eea5848ffcdd22ff144cdaf31732efd86aa23dcef4da85225face907dcf612</span><br><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                        PORTS               NAMES</span><br><span class="line">28eea5848ffc        <span class="built_in">test</span>:1              <span class="string">&quot;/home/test/docker.sh&quot;</span>   2 seconds ago       Up 1 second                                       dazzling_ride</span><br><span class="line">5969d3713548        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>              29 minutes ago      Exited (137) 15 minutes ago                       optimistic_lewin</span><br><span class="line">06b28d43f700        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>              2 hours ago         Exited (137) 22 minutes ago                       loving_jepsen</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>              2 hours ago         Exited (0) 2 hours ago                            xenodochial_colden</span><br><span class="line">[root@localhost 7]# docker logs 28eea5848ffc</span><br><span class="line">welcome</span><br><span class="line">welcome</span><br><span class="line">welcome</span><br><span class="line">welcome</span><br><span class="line">welcome</span><br><span class="line"></span><br><span class="line">[root@localhost 7]# docker logs --<span class="built_in">tail</span> 5  28eea5848ffc      <span class="comment">#只显示容器日志的后5行</span></span><br><span class="line">welcome</span><br><span class="line">welcome</span><br><span class="line">welcome</span><br><span class="line">welcome</span><br><span class="line">welcome</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-27-Docker命令：pause-unpause"><a href="#3-27-Docker命令：pause-unpause" class="headerlink" title="3.27 Docker命令：pause &amp;&amp; unpause"></a>3.27 Docker命令：pause &amp;&amp; unpause</h3><blockquote>
<p>用于将一个或多个容器的进程暂停和恢复</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                        PORTS               NAMES</span><br><span class="line">28eea5848ffc        <span class="built_in">test</span>:1              <span class="string">&quot;/home/test/docker.sh&quot;</span>   6 minutes ago       Up 6 minutes                                      dazzling_ride</span><br><span class="line">5969d3713548        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>              35 minutes ago      Exited (137) 21 minutes ago                       optimistic_lewin</span><br><span class="line">06b28d43f700        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>              2 hours ago         Exited (137) 28 minutes ago                       loving_jepsen</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>              2 hours ago         Exited (0) 2 hours ago                            xenodochial_colden</span><br><span class="line">[root@localhost 7]# docker pause 28eea5848ffc       <span class="comment">#暂停容器进程</span></span><br><span class="line">28eea5848ffc</span><br><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                        PORTS               NAMES</span><br><span class="line">28eea5848ffc        <span class="built_in">test</span>:1              <span class="string">&quot;/home/test/docker.sh&quot;</span>   6 minutes ago       Up 6 minutes (Paused)                             dazzling_ride</span><br><span class="line">5969d3713548        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>              36 minutes ago      Exited (137) 22 minutes ago                       optimistic_lewin</span><br><span class="line">06b28d43f700        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>              2 hours ago         Exited (137) 29 minutes ago                       loving_jepsen</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>              2 hours ago         Exited (0) 2 hours ago                            xenodochial_colden</span><br><span class="line">[root@localhost 7]# docker unpause 28eea5848ffc     <span class="comment">#恢复容器进程</span></span><br><span class="line">28eea5848ffc</span><br><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                        PORTS               NAMES</span><br><span class="line">28eea5848ffc        <span class="built_in">test</span>:1              <span class="string">&quot;/home/test/docker.sh&quot;</span>   7 minutes ago       Up 7 minutes                                      dazzling_ride</span><br><span class="line">5969d3713548        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>              36 minutes ago      Exited (137) 22 minutes ago                       optimistic_lewin</span><br><span class="line">06b28d43f700        d396465fd814        <span class="string">&quot;/bin/bash&quot;</span>              2 hours ago         Exited (137) 29 minutes ago                       loving_jepsen</span><br><span class="line">af5a8cfcfe5b        a456dd68d802        <span class="string">&quot;/bin/bash&quot;</span>              2 hours ago         Exited (0) 2 hours ago                            xenodochial_colden</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-28-Docker命令：port"><a href="#3-28-Docker命令：port" class="headerlink" title="3.28 Docker命令：port"></a>3.28 Docker命令：port</h3><blockquote>
<p>用于列出一个容器的端口映射及协议</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 7]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos     3                   0ac5e5b6fead        31 minutes ago      200MB</span><br><span class="line">zhaoshuo/centos     2                   d396465fd814        2 hours ago         200MB</span><br><span class="line"><span class="built_in">test</span>                1                   a456dd68d802        3 hours ago         200MB</span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        3 hours ago         200MB</span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line">[root@localhost 7]# docker run -d -it -p 2222:22 <span class="built_in">test</span>:1     <span class="comment">#启动一个镜像的容器进程 -p 指定本地2222端口映射到容器的22端口</span></span><br><span class="line">30cf521af35820e9bf3803ab526f02065bdb2935a4f58c7278fb17a99ea71163</span><br><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES</span><br><span class="line">30cf521af358        <span class="built_in">test</span>:1              <span class="string">&quot;/home/test/docker.sh&quot;</span>   4 seconds ago       Up 3 seconds        0.0.0.0:2222-&gt;22/tcp   hardcore_cori     </span><br><span class="line">[root@localhost 7]# docker port 30cf521af358            <span class="comment">#查看容器进程的端口映射及协议</span></span><br><span class="line">22/tcp -&gt; 0.0.0.0:2222</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-29-Docker命令：rename"><a href="#3-29-Docker命令：rename" class="headerlink" title="3.29 Docker命令：rename"></a>3.29 Docker命令：rename</h3><blockquote>
<p>给容器进程重命名</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS              PORTS                  NAMES</span><br><span class="line">30cf521af358        <span class="built_in">test</span>:1              <span class="string">&quot;/home/test/docker.sh&quot;</span>   About a minute ago   Up About a minute   0.0.0.0:2222-&gt;22/tcp   hardcore_cori</span><br><span class="line">[root@localhost 7]# docker rename hardcore_cori zhaoshuo</span><br><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES</span><br><span class="line">30cf521af358        <span class="built_in">test</span>:1              <span class="string">&quot;/home/test/docker.sh&quot;</span>   2 minutes ago       Up 2 minutes        0.0.0.0:2222-&gt;22/tcp   zhaoshuo</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-30-Docker命令：restart"><a href="#3-30-Docker命令：restart" class="headerlink" title="3.30 Docker命令：restart"></a>3.30 Docker命令：restart</h3><blockquote>
<p>重启一个容器进程</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES</span><br><span class="line">30cf521af358        <span class="built_in">test</span>:1              <span class="string">&quot;/home/test/docker.sh&quot;</span>   3 minutes ago       Up 3 minutes        0.0.0.0:2222-&gt;22/tcp   zhaoshuo</span><br><span class="line">[root@localhost 7]# docker restart 30cf521af358</span><br><span class="line">30cf521af358</span><br><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES</span><br><span class="line">30cf521af358        <span class="built_in">test</span>:1              <span class="string">&quot;/home/test/docker.sh&quot;</span>   3 minutes ago       Up 1 second         0.0.0.0:2222-&gt;22/tcp   zhaoshuo</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-31-Docker命令：stats"><a href="#3-31-Docker命令：stats" class="headerlink" title="3.31 Docker命令：stats"></a>3.31 Docker命令：stats</h3><blockquote>
<p>用于时时输出容器的资源使用情况</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES</span><br><span class="line">30cf521af358        <span class="built_in">test</span>:1              <span class="string">&quot;/home/test/docker.sh&quot;</span>   5 minutes ago       Up 2 minutes        0.0.0.0:2222-&gt;22/tcp   zhaoshuo</span><br><span class="line">[root@localhost 7]# docker stats 30cf521af358</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/articles/2018/10/02/dockerjichu-shang/4.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#--no-tream只输出一次</span><br><span class="line">[root@localhost 7]# docker stats 30cf521af358 --no-stream</span><br><span class="line">CONTAINER ID        NAME                CPU %               MEM USAGE / LIMIT   MEM %               NET I/O             BLOCK I/O           PIDS</span><br><span class="line">30cf521af358        zhaoshuo            0.00%               288KiB / 974.6MiB   0.03%               648B / 0B           0B / 0B             2</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-32-Docker命令：tag"><a href="#3-32-Docker命令：tag" class="headerlink" title="3.32 Docker命令：tag"></a>3.32 Docker命令：tag</h3><blockquote>
<p>用于从一个指定的镜像创建另外一个镜像</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 7]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos     3                   0ac5e5b6fead        39 minutes ago      200MB</span><br><span class="line">zhaoshuo/centos     2                   d396465fd814        2 hours ago         200MB</span><br><span class="line"><span class="built_in">test</span>                1                   a456dd68d802        3 hours ago         200MB</span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        3 hours ago         200MB</span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line">[root@localhost 7]# docker tag <span class="built_in">test</span>:1 <span class="built_in">test</span>:2        <span class="comment">#我们可以指定名字：标志来创建</span></span><br><span class="line">[root@localhost 7]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos     3                   0ac5e5b6fead        39 minutes ago      200MB</span><br><span class="line">zhaoshuo/centos     2                   d396465fd814        2 hours ago         200MB</span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        3 hours ago         200MB</span><br><span class="line"><span class="built_in">test</span>                1                   a456dd68d802        3 hours ago         200MB</span><br><span class="line"><span class="built_in">test</span>                2                   a456dd68d802        3 hours ago         200MB</span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line">[root@localhost 7]# docker rmi <span class="built_in">test</span>:2</span><br><span class="line">Untagged: <span class="built_in">test</span>:2</span><br><span class="line">[root@localhost 7]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos     3                   0ac5e5b6fead        39 minutes ago      200MB</span><br><span class="line">zhaoshuo/centos     2                   d396465fd814        2 hours ago         200MB</span><br><span class="line"><span class="built_in">test</span>                1                   a456dd68d802        3 hours ago         200MB</span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        3 hours ago         200MB</span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line">[root@localhost 7]# docker tag a456dd68d802 <span class="built_in">test</span>:2      <span class="comment">#我们也可以指定image id来创建</span></span><br><span class="line">[root@localhost 7]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos     3                   0ac5e5b6fead        40 minutes ago      200MB</span><br><span class="line">zhaoshuo/centos     2                   d396465fd814        2 hours ago         200MB</span><br><span class="line"><span class="built_in">test</span>                1                   a456dd68d802        3 hours ago         200MB</span><br><span class="line"><span class="built_in">test</span>                2                   a456dd68d802        3 hours ago         200MB</span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        3 hours ago         200MB</span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-33-Docker命令：top"><a href="#3-33-Docker命令：top" class="headerlink" title="3.33 Docker命令：top"></a>3.33 Docker命令：top</h3><blockquote>
<p>用于显示指定容器的进程信息</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES</span><br><span class="line">30cf521af358        <span class="built_in">test</span>:1              <span class="string">&quot;/home/test/docker.sh&quot;</span>   9 minutes ago       Up 5 minutes        0.0.0.0:2222-&gt;22/tcp   zhaoshuo</span><br><span class="line">[root@localhost 7]# docker top 30cf521af358</span><br><span class="line">UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD</span><br><span class="line">root                4307                4293                0                   01:02               pts/0               00:00:00            /bin/bash /home/test/docker.sh</span><br><span class="line">root                4484                4307                0                   01:08               pts/0               00:00:00            <span class="built_in">sleep</span> 5</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-34-Docker命令：update"><a href="#3-34-Docker命令：update" class="headerlink" title="3.34 Docker命令：update"></a>3.34 Docker命令：update</h3><blockquote>
<p>用于调整一个或多个容器的启动配置</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 7]# docker update --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line">Usage:	docker update [OPTIONS] CONTAINER [CONTAINER...]</span><br><span class="line"></span><br><span class="line">Update configuration of one or more containers</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">      --blkio-weight uint16        Block IO (relative weight), between 10 and 1000, or 0 to <span class="built_in">disable</span></span><br><span class="line">                                   (default 0)</span><br><span class="line">      --cpu-period int             Limit CPU CFS (Completely Fair Scheduler) period</span><br><span class="line">      --cpu-quota int              Limit CPU CFS (Completely Fair Scheduler) quota</span><br><span class="line">      --cpu-rt-period int          Limit the CPU real-time period <span class="keyword">in</span> microseconds</span><br><span class="line">      --cpu-rt-runtime int         Limit the CPU real-time runtime <span class="keyword">in</span> microseconds</span><br><span class="line">  -c, --cpu-shares int             CPU shares (relative weight)</span><br><span class="line">      --cpus decimal               Number of CPUs</span><br><span class="line">      --cpuset-cpus string         CPUs <span class="keyword">in</span> <span class="built_in">which</span> to allow execution (0-3, 0,1)</span><br><span class="line">      --cpuset-mems string         MEMs <span class="keyword">in</span> <span class="built_in">which</span> to allow execution (0-3, 0,1)</span><br><span class="line">      --kernel-memory bytes        Kernel memory <span class="built_in">limit</span></span><br><span class="line">  -m, --memory bytes               Memory <span class="built_in">limit</span></span><br><span class="line">      --memory-reservation bytes   Memory soft <span class="built_in">limit</span></span><br><span class="line">      --memory-swap bytes          Swap <span class="built_in">limit</span> equal to memory plus swap: <span class="string">&#x27;-1&#x27;</span> to <span class="built_in">enable</span> unlimited swap</span><br><span class="line">      --restart string             Restart policy to apply when a container exits</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-35-Docker命令：version-and-wait"><a href="#3-35-Docker命令：version-and-wait" class="headerlink" title="3.35 Docker命令：version and wait"></a>3.35 Docker命令：version and wait</h3><blockquote>
<p>version用于显示docker的版本信息<br>wait用于捕捉一个或多个容器的退出状态,并返回退出状态码</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#显示docker版本信息</span></span><br><span class="line">[root@localhost 7]# docker version</span><br><span class="line">Client:</span><br><span class="line"> Version:           18.06.1-ce</span><br><span class="line"> API version:       1.38</span><br><span class="line"> Go version:        go1.10.3</span><br><span class="line"> Git commit:        e68fc7a</span><br><span class="line"> Built:             Tue Aug 21 17:23:03 2018</span><br><span class="line"> OS/Arch:           linux/amd64</span><br><span class="line"> Experimental:      <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          18.06.1-ce</span><br><span class="line">  API version:      1.38 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.10.3</span><br><span class="line">  Git commit:       e68fc7a</span><br><span class="line">  Built:            Tue Aug 21 17:25:29 2018</span><br><span class="line">  OS/Arch:          linux/amd64</span><br><span class="line">  Experimental:     <span class="literal">false</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">#监听容器的退出状态并返回状态码</span></span><br><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES</span><br><span class="line">30cf521af358        <span class="built_in">test</span>:1              <span class="string">&quot;/home/test/docker.sh&quot;</span>   11 minutes ago      Up 8 minutes        0.0.0.0:2222-&gt;22/tcp   zhaoshuo</span><br><span class="line"></span><br><span class="line">[root@localhost 7]# docker <span class="built_in">wait</span> 30cf521af358        <span class="comment">#需要在开一个窗口stop这个容器进程再查看</span></span><br><span class="line">137</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-36-Docker命令：login-logout-push"><a href="#3-36-Docker命令：login-logout-push" class="headerlink" title="3.36 Docker命令：login &amp;&amp; logout &amp;&amp; push"></a>3.36 Docker命令：login &amp;&amp; logout &amp;&amp; push</h3><blockquote>
</blockquote>
<ul>
<li>login用于登陆docker hub官方公有仓库</li>
<li>logout用于登出docker hub官方公有仓库</li>
<li>push用于将本地镜像提交到docker hub</li>
</ul>
<p>DockerHub官方公有镜像仓库：<a target="_blank" rel="noopener" href="https://hub.docker.com/">https://hub.docker.com/</a></p>
<h2 id="四，管理应用程序数据"><a href="#四，管理应用程序数据" class="headerlink" title="四，管理应用程序数据"></a>四，管理应用程序数据</h2><h3 id="4-1-Volume和Bind-Mount"><a href="#4-1-Volume和Bind-Mount" class="headerlink" title="4.1 Volume和Bind Mount"></a>4.1 Volume和Bind Mount</h3><p><strong>将Docker主机数据挂载到容器</strong></p>
<ul>
<li><input checked="" disabled="" type="checkbox"> Docker提供三种不同方式将数据从宿主机挂载到容器中：volumes，bind mounts和tmpfs。 <ul>
<li>volumes：Docker管理宿主机文件系统的一部分（&#x2F;var&#x2F;lib&#x2F;docker&#x2F;volumes）</li>
<li>bind mounts:可以存储在宿主机系统的任意位置</li>
<li>tmpfs：挂载存储在宿主机系统的内存中，而不会写入宿主机的文件系统</li>
</ul>
</li>
</ul>
<p><img src="/articles/2018/10/02/dockerjichu-shang/5.png"></p>
<h3 id="4-1-1-Volume"><a href="#4-1-1-Volume" class="headerlink" title="4.1.1 Volume"></a>4.1.1 Volume</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建一个卷</span></span><br><span class="line">[root@localhost 7]# docker volume create nginx-vol</span><br><span class="line">nginx-vol</span><br><span class="line">[root@localhost 7]# docker volume <span class="built_in">ls</span></span><br><span class="line">DRIVER              VOLUME NAME</span><br><span class="line"><span class="built_in">local</span>               nginx-vol</span><br><span class="line">[root@localhost 7]# docker volume inspect nginx-vol</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;CreatedAt&quot;</span>: <span class="string">&quot;2018-10-14T01:14:25+08:00&quot;</span>,       <span class="comment">#创建时间</span></span><br><span class="line">        <span class="string">&quot;Driver&quot;</span>: <span class="string">&quot;local&quot;</span>,      <span class="comment">#驱动</span></span><br><span class="line">        <span class="string">&quot;Labels&quot;</span>: &#123;&#125;,</span><br><span class="line">        <span class="string">&quot;Mountpoint&quot;</span>: <span class="string">&quot;/var/lib/docker/volumes/nginx-vol/_data&quot;</span>,        <span class="comment">#挂载点</span></span><br><span class="line">        <span class="string">&quot;Name&quot;</span>: <span class="string">&quot;nginx-vol&quot;</span>,        <span class="comment">#卷名</span></span><br><span class="line">        <span class="string">&quot;Options&quot;</span>: &#123;&#125;,</span><br><span class="line">        <span class="string">&quot;Scope&quot;</span>: <span class="string">&quot;local&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">#下载一个nginx官方镜像</span></span><br><span class="line">[root@localhost 7]# docker pull nginx</span><br><span class="line">[root@localhost 7]# docker pull nginx</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/nginx</span><br><span class="line">802b00ed6f79: Pull complete </span><br><span class="line">5291925314b3: Pull complete </span><br><span class="line">bd9f53b2c2de: Pull complete </span><br><span class="line">Digest: sha256:9ad0746d8f2ea6df3a17ba89eca40b48c47066dfab55a75e08e2b70fc80d929e</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> nginx:latest</span><br><span class="line"></span><br><span class="line">[root@localhost 7]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        3 hours ago         200MB</span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line">nginx               latest              be1f31be9a87        10 days ago         109MB</span><br><span class="line"></span><br><span class="line">[root@localhost 7]# docker run -dit --name=nginx-test --mount src=nginx-vol,dst=/usr/share/nginx/html nginx</span><br><span class="line">499069e77ce67f55cb1c716d55fc08d783e3a2f2b7fbba9da9d9ed7d010cf1a9</span><br><span class="line"></span><br><span class="line">特别说明：</span><br><span class="line">--name：容器的名字</span><br><span class="line">--mount：挂载</span><br><span class="line">src：源卷的名字</span><br><span class="line">dst：挂载到容器中的路径</span><br><span class="line"></span><br><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES</span><br><span class="line">499069e77ce6        nginx               <span class="string">&quot;nginx -g &#x27;daemon of…&quot;</span>   15 seconds ago      Up 14 seconds       80/tcp              nginx-test</span><br><span class="line"></span><br><span class="line"><span class="comment">#向容器中的挂载目录创建文件，查看是否挂载成功</span></span><br><span class="line">[root@localhost 7]# docker <span class="built_in">exec</span> nginx-test <span class="built_in">touch</span> /usr/share/nginx/html/test.txt</span><br><span class="line">[root@localhost 7]# docker <span class="built_in">exec</span> nginx-test <span class="built_in">ls</span> /usr/share/nginx/html/</span><br><span class="line">50x.html</span><br><span class="line">index.html</span><br><span class="line">test.txt        <span class="comment">#有了</span></span><br><span class="line">[root@localhost 7]# <span class="built_in">ls</span> /var/lib/docker/volumes/nginx-vol/_data/</span><br><span class="line">50x.html  index.html  test.txt      <span class="comment">#成功</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#清理容器进程</span></span><br><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS              PORTS               NAMES</span><br><span class="line">499069e77ce6        nginx               <span class="string">&quot;nginx -g &#x27;daemon of…&quot;</span>   About a minute ago   Up About a minute   80/tcp              nginx-test</span><br><span class="line">[root@localhost 7]# docker stop nginx-test</span><br><span class="line">nginx-test</span><br><span class="line">[root@localhost 7]# docker <span class="built_in">rm</span> nginx-test</span><br><span class="line">nginx-test</span><br><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">[root@localhost 7]# <span class="built_in">ls</span> /var/lib/docker/volumes/nginx-vol/_data/</span><br><span class="line">50x.html  index.html  test.txt      <span class="comment">#清理容器后，挂载的卷的数据仍旧存在</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#重新启动镜像nginx的容器进程</span></span><br><span class="line">[root@localhost 7]# docker run -dit --name nginx-test -p 88:80 --mount src=nginx-vol,dst=/usr/share/nginx/html nginx</span><br><span class="line">ba61800faa00559c66a557ee6e9e584c29d7af5f73f635fcbd9b83066b235331</span><br><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                NAMES</span><br><span class="line">ba61800faa00        nginx               <span class="string">&quot;nginx -g &#x27;daemon of…&quot;</span>   4 seconds ago       Up 3 seconds        0.0.0.0:88-&gt;80/tcp   nginx-test</span><br><span class="line"></span><br><span class="line">特别提示：</span><br><span class="line">docker run的-p参数：指定端口的映射，88：80的意思就是将宿主机88端口的访问映射到容器进程的80端口</span><br></pre></td></tr></table></figure>

<p><strong>现在通过浏览器访问宿主机的88端口，进而访问容器进程的80端口</strong></p>
<p><img src="/articles/2018/10/02/dockerjichu-shang/6.png"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在数据卷nginx-vol里换一个网页在访问</span></span><br><span class="line">[root@localhost 7]# <span class="built_in">rm</span> -rf /var/lib/docker/volumes/nginx-vol/_data/*</span><br><span class="line">[root@localhost 7]# <span class="built_in">echo</span> <span class="string">&quot;welcome to yunjisuan&quot;</span> &gt; /var/lib/docker/volumes/nginx-vol/_data/index.html</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/articles/2018/10/02/dockerjichu-shang/7.png"></p>
<p><strong>在启动一个镜像nginx的进程，让两个nginx的容器进程公用一个数据卷nginx-vol</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 7]# docker run -dit --name nginx-test2 -p 89:80 --mount src=nginx-vol,dst=/usr/share/nginx/html nginx</span><br><span class="line">78a9c5517e94527c6822550781cfce5e4c434c322a75541f37cd78333e3c9741</span><br><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                NAMES</span><br><span class="line">78a9c5517e94        nginx               <span class="string">&quot;nginx -g &#x27;daemon of…&quot;</span>   2 seconds ago       Up 2 seconds        0.0.0.0:89-&gt;80/tcp   nginx-test2</span><br><span class="line">ba61800faa00        nginx               <span class="string">&quot;nginx -g &#x27;daemon of…&quot;</span>   3 minutes ago       Up 3 minutes        0.0.0.0:88-&gt;80/tcp   nginx-test</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>用浏览器访问docker宿主机的89端口</strong></p>
<p><img src="/articles/2018/10/02/dockerjichu-shang/8.png"></p>
<h4 id="4-1-2-Bind-Mounts"><a href="#4-1-2-Bind-Mounts" class="headerlink" title="4.1.2 Bind Mounts"></a>4.1.2 Bind Mounts</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS              PORTS                NAMES</span><br><span class="line">78a9c5517e94        nginx               <span class="string">&quot;nginx -g &#x27;daemon of…&quot;</span>   About a minute ago   Up About a minute   0.0.0.0:89-&gt;80/tcp   nginx-test2</span><br><span class="line">ba61800faa00        nginx               <span class="string">&quot;nginx -g &#x27;daemon of…&quot;</span>   5 minutes ago        Up 5 minutes        0.0.0.0:88-&gt;80/tcp   nginx-test</span><br><span class="line">[root@localhost 7]# docker run -dit --name nginx-test3 -p 90:80 --mount <span class="built_in">type</span>=<span class="built_in">bind</span>,src=/var/lib/docker/volumes/nginx-vol/_data,dst=/usr/share/nginx/html nginx</span><br><span class="line">9cd50b218764905cdc1d37c1c8f317938cc4d8e33cf762dabd0036846cc529fb</span><br><span class="line">[root@localhost 7]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS              PORTS                NAMES</span><br><span class="line">9cd50b218764        nginx               <span class="string">&quot;nginx -g &#x27;daemon of…&quot;</span>   2 seconds ago        Up 1 second         0.0.0.0:90-&gt;80/tcp   nginx-test3</span><br><span class="line">78a9c5517e94        nginx               <span class="string">&quot;nginx -g &#x27;daemon of…&quot;</span>   About a minute ago   Up About a minute   0.0.0.0:89-&gt;80/tcp   nginx-test2</span><br><span class="line">ba61800faa00        nginx               <span class="string">&quot;nginx -g &#x27;daemon of…&quot;</span>   5 minutes ago        Up 5 minutes        0.0.0.0:88-&gt;80/tcp   nginx-test</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>用浏览器访问docker宿主机的90端口</strong></p>
<p><img src="/articles/2018/10/02/dockerjichu-shang/9.png"></p>
<blockquote>
<p>特别提示：<br>bind mounts可以挂载宿主机上的任意目录，而volume先得创建后才能挂载</p>
</blockquote>
<h3 id="4-2-实战容器部署LNMP网站平台"><a href="#4-2-实战容器部署LNMP网站平台" class="headerlink" title="4.2 实战容器部署LNMP网站平台"></a>4.2 实战容器部署LNMP网站平台</h3><blockquote>
<p>首先下载一个wordpress博客<br><code>wget https://cn.wordpress.org/wordpress-4.7.4-zh_CN.tar.gz</code></p>
</blockquote>
<h4 id="4-2-1-创建MySQL数据库容器"><a href="#4-2-1-创建MySQL数据库容器" class="headerlink" title="4.2.1 创建MySQL数据库容器"></a>4.2.1 创建MySQL数据库容器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#下载MySQL5.6版本镜像</span></span><br><span class="line">[root@localhost ~]# docker pull mysql:5.6</span><br><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos7    1                   a456dd68d802        3 hours ago         200MB</span><br><span class="line">centos              7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos              latest              75835a67d134        3 days ago          200MB</span><br><span class="line">nginx               latest              be1f31be9a87        10 days ago         109MB</span><br><span class="line">mysql               5.6                 1f47fade220d        5 weeks ago         256MB</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个自定义网络</span></span><br><span class="line">[root@localhost ~]# docker network create lnmp</span><br><span class="line">e9c6f3aab48b1048af23ad5347408ef0b460c3dbb1917f04565dcd7d4f8498b7</span><br><span class="line">[root@localhost ~]# docker network <span class="built_in">ls</span></span><br><span class="line">NETWORK ID          NAME                DRIVER              SCOPE</span><br><span class="line">bb056f017977        bridge              bridge              <span class="built_in">local</span></span><br><span class="line">0f75cc017204        host                host                <span class="built_in">local</span></span><br><span class="line">e9c6f3aab48b        lnmp                bridge              <span class="built_in">local</span>       <span class="comment">#有了（默认驱动为网桥）</span></span><br><span class="line">c71020a2992f        none                null                <span class="built_in">local</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#启动MySQL数据库容器</span></span><br><span class="line">[root@localhost ~]# docker run -dit --name lnmp_mysql --network lnmp -p 3306:3306 --mount src=mysql-vol,dst=/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123123 mysql:5.6 --character-set-server=utf8</span><br><span class="line">6acbcd435954d0aef1ffd07a5ddb42581200e85d2c76e160cfc1bd2ee9ebe7fb</span><br><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES</span><br><span class="line">6acbcd435954        mysql:5.6           <span class="string">&quot;docker-entrypoint.s…&quot;</span>   5 seconds ago       Up 4 seconds        0.0.0.0:3306-&gt;3306/tcp   lnmp_mysql</span><br><span class="line">9cd50b218764        nginx               <span class="string">&quot;nginx -g &#x27;daemon of…&quot;</span>   5 minutes ago       Exited (0)        0.0.0.0:90-&gt;80/tcp       nginx-test3</span><br><span class="line">78a9c5517e94        nginx               <span class="string">&quot;nginx -g &#x27;daemon of…&quot;</span>   6 minutes ago       Exited (0)        0.0.0.0:89-&gt;80/tcp       nginx-test2</span><br><span class="line">ba61800faa00        nginx               <span class="string">&quot;nginx -g &#x27;daemon of…&quot;</span>   10 minutes ago      Exited (0)       0.0.0.0:88-&gt;80/tcp       nginx-test</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>特别提示：</p>
</blockquote>
<ul>
<li>自定义网络lnmp如果不提前创建的话，在启动容器进程时会报错</li>
<li>如果没有提前pull好mysql:5.6那么容器在启动时会自动下载对应镜像</li>
<li>如果没有提前docker volume create mysql-vol，那么容器启动时会自动创建</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看容器lnmp_mysql的日志输出</span></span><br><span class="line">[root@localhost ~]# docker logs lnmp_mysql</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看容器里启动的进程</span></span><br><span class="line">[root@localhost ~]# docker top lnmp_mysql</span><br><span class="line">UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD</span><br><span class="line">polkitd             5328                5315                0                   01:33               pts/0               00:00:00            mysqld --character-set-server=utf8</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="4-2-2-向容器里的Mysql创建一个库"><a href="#4-2-2-向容器里的Mysql创建一个库" class="headerlink" title="4.2.2 向容器里的Mysql创建一个库"></a>4.2.2 向容器里的Mysql创建一个库</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker <span class="built_in">exec</span> lnmp_mysql sh -c <span class="string">&#x27;exec mysql -uroot -p&quot;$MYSQL_ROOT_PASSWORD&quot; -e&quot;create database wp&quot;&#x27;</span></span><br><span class="line">Warning: Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="4-2-3-在docker宿主机上安装mysql的客户端通过端口映射访问容器内的mysql"><a href="#4-2-3-在docker宿主机上安装mysql的客户端通过端口映射访问容器内的mysql" class="headerlink" title="4.2.3 在docker宿主机上安装mysql的客户端通过端口映射访问容器内的mysql"></a>4.2.3 在docker宿主机上安装mysql的客户端通过端口映射访问容器内的mysql</h4><blockquote>
<p>因为已经将mysql容器的3306端口映射到了docker宿主机的3306，因此访问本地即可</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装mysql客户端</span></span><br><span class="line">[root@localhost ~]# yum -y install mysql</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看本机IP地址</span></span><br><span class="line">[root@localhost ~]# hostname -I | xargs -n1 | <span class="built_in">head</span> -1</span><br><span class="line">192.168.131.162</span><br><span class="line">xargs: <span class="built_in">echo</span>：因信号 13 而终止</span><br><span class="line"></span><br><span class="line"><span class="comment">#远程方式连接docker宿主机的3306端口</span></span><br><span class="line">[root@localhost ~]# mysql -h192.168.131.162 -P3306 -uroot -p123123</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection <span class="built_in">id</span> is 2</span><br><span class="line">Server version: 5.6.41 MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| wp                 |            <span class="comment">#已经创建wp库了</span></span><br><span class="line">+--------------------+</span><br><span class="line">4 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.10 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="4-2-4-创建nginx-PHP环境容器"><a href="#4-2-4-创建nginx-PHP环境容器" class="headerlink" title="4.2.4 创建nginx+PHP环境容器"></a>4.2.4 创建nginx+PHP环境容器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建一个网页目录</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mkdir</span> -p /app/wwwroot</span><br><span class="line">[root@localhost ~]# ll -d /app/wwwroot</span><br><span class="line">drwxr-xr-x 2 root root 6 10月 14 01:39 /app/wwwroot</span><br><span class="line"></span><br><span class="line"><span class="comment">#下载richarvey/nginx-php-fpm镜像</span></span><br><span class="line">[root@localhost ~]# docker pull richarvey/nginx-php-fpm</span><br><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY                TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">zhaoshuo/centos7          1                   a456dd68d802        4 hours ago         200MB</span><br><span class="line">centos                    7                   75835a67d134        3 days ago          200MB</span><br><span class="line">centos                    latest              75835a67d134        3 days ago          200MB</span><br><span class="line">nginx                     latest              be1f31be9a87        10 days ago         109MB</span><br><span class="line">richarvey/nginx-php-fpm   latest              de1554d0b081        2 weeks ago         302MB</span><br><span class="line">mysql                     5.6                 1f47fade220d        5 weeks ago         256MB</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动richarvey/nginx-php-fpm镜像的容器</span></span><br><span class="line">[root@localhost ~]# docker run -dit --name lnmp_web --network lnmp -p 88:80 --mount <span class="built_in">type</span>=<span class="built_in">bind</span>,src=/app/wwwroot,dst=/var/www/html richarvey/nginx-php-fpm</span><br><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE                     COMMAND                  CREATED             STATUS                      PORTS                                   NAMES</span><br><span class="line">677a6ddd712e        richarvey/nginx-php-fpm   <span class="string">&quot;docker-php-entrypoi…&quot;</span>   5 minutes ago       Up 3 seconds                443/tcp, 9000/tcp, 0.0.0.0:88-&gt;80/tcp   lnmp_web</span><br><span class="line">6acbcd435954        mysql:5.6                 <span class="string">&quot;docker-entrypoint.s…&quot;</span>   24 minutes ago      Up 12 seconds               0.0.0.0:3306-&gt;3306/tcp                  lnmp_mysql</span><br><span class="line">9cd50b218764        nginx                     <span class="string">&quot;nginx -g &#x27;daemon of…&quot;</span>   29 minutes ago      Exited (0) 8 minutes ago                                            nginx-test3</span><br><span class="line">78a9c5517e94        nginx                     <span class="string">&quot;nginx -g &#x27;daemon of…&quot;</span>   30 minutes ago      Exited (0) 8 minutes ago                                            nginx-test2</span><br><span class="line">ba61800faa00        nginx                     <span class="string">&quot;nginx -g &#x27;daemon of…&quot;</span>   34 minutes ago      Exited (0) 47 seconds ago                                           nginx-test</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="4-2-5-解压wordpress到网页目录-app-wwwroot下"><a href="#4-2-5-解压wordpress到网页目录-app-wwwroot下" class="headerlink" title="4.2.5 解压wordpress到网页目录&#x2F;app&#x2F;wwwroot下"></a>4.2.5 解压wordpress到网页目录&#x2F;app&#x2F;wwwroot下</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# tar xf wordpress-4.7.4-zh_CN.tar.gz -C /app/wwwroot/</span><br><span class="line">[root@localhost ~]# <span class="built_in">cd</span> /app/wwwroot/</span><br><span class="line">[root@localhost wwwroot]# <span class="built_in">ls</span></span><br><span class="line">wordpress</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="4-2-6-博客wordpress访问测试"><a href="#4-2-6-博客wordpress访问测试" class="headerlink" title="4.2.6 博客wordpress访问测试"></a>4.2.6 博客wordpress访问测试</h4><blockquote>
<p>通过浏览器进行docker宿主机的88端口的访问测试<br><a target="_blank" rel="noopener" href="http://ip:88/wordpress">http://IP:88/wordpress</a></p>
</blockquote>
<p><strong>特别提示：</strong></p>
<blockquote>
<p>如果在访问时，出现以下情况</p>
</blockquote>
<p><img src="/articles/2018/10/02/dockerjichu-shang/10.png"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#如果出现连接不上的情况，那么请按顺序执行以下命令一遍</span></span><br><span class="line">[root@docker wwwroot]# systemctl stop firewalld</span><br><span class="line">[root@docker wwwroot]# systemctl stop iptables.service</span><br><span class="line">Failed to stop iptables.service: Unit iptables.service not loaded.</span><br><span class="line">[root@docker wwwroot]# iptables -F</span><br><span class="line">[root@docker wwwroot]# iptables -P FORWARD ACCEPT</span><br><span class="line">[root@docker wwwroot]# iptables -P INPUT ACCEPT</span><br><span class="line">[root@docker wwwroot]# iptables -P OUTPUT ACCEPT</span><br></pre></td></tr></table></figure>

<blockquote>
<p>再次访问</p>
</blockquote>
<p><img src="/articles/2018/10/02/dockerjichu-shang/11.png"></p>
<blockquote>
<p><strong>成功！！</strong><br>特别提示：<br>如果多次连续访问同一网页，那么浏览器有可能默认去掉指定的端口<br>因此，若访问不到，请查看是否指定了88端口</p>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://kkabuzs.github.io">Kkabuzs</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://kkabuzs.github.io/articles/2018/10/02/dockerjichu-shang/">https://kkabuzs.github.io/articles/2018/10/02/dockerjichu-shang/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://kkabuzs.github.io" target="_blank">kkabuzs博客屋</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Docker/">Docker</a></div><div class="post-share"><div class="social-share" data-image="/themes-img/touxiang.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/articles/2018/08/31/tomcatxiangjie/" title="Tomcat详解"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Tomcat详解</div></div><div class="info-2"><div class="info-item-1"> 无论你跑多少距离，放弃很容易，停下来，肉体得到暂时的舒服，但你最终会一无所得。坚持或许很难，但你最后一定会有所收获，跑过的路，永远不会欺骗自己。  Tomcat详解一，Tomcat简介   Tomcat是Apache软件基金会（Apache Software Foundation）的Jakarta项目中的一个核心项目，由Apache，Sun和其他一些公司及个人共同开发而成。 Tomcat服务器是一个免费的开放源代码的Web应用服务器，属于轻量级应用服务器，在中小型系统和并发访问用户不是很多的场合下被普遍使用，是开发和调试JSP程序的首选。 Tomcat和Nginx，APache（httpd），lighttpd等Web服务器一样，具有处理HTML页面的功能，另外它还是一个Servlet和JSP容器，独立的Servlet容器是Tomcat的默认模式。不过，Tomcat处理静态HTML的能力不如Nginx／Apache服务器。  二，Tomcat安装2.1...</div></div></div></a><a class="pagination-related" href="/articles/2018/10/14/dockerjichu-xia/" title="Docker基础（下）"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Docker基础（下）</div></div><div class="info-2"><div class="info-item-1"> 无论你跑多少距离，放弃很容易，停下来，肉体得到暂时的舒服，但你最终会一无所得。坚持或许很难，但你最后一定会有所收获，跑过的路，永远不会欺骗自己。  Docker基础（下）五，网络管理5.1 容器网络模式  Docker支持5种网络模式  bridge  默认网络，Docker启动后默认创建一个docker0网桥，默认创建的容器也是添加到这个网桥中   host  容器不会获得一个独立的network namespace，而是与宿主机共用一个   none  获取独立的network namespace，但不为容器进行任何网络配置   container  与指定的容器使用同一个network namespace，网卡配置也都是相同的   自定义  自定义网桥，默认与bridge网络一样      5.1.1 bridge网络类型123456789101112131415161718192021222324252627282930313233343536373839404142#安装bridge管理工具[root@localhost ~]# yum -y install...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/articles/2018/10/14/dockerjichu-xia/" title="Docker基础（下）"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2018-10-14</div><div class="info-item-2">Docker基础（下）</div></div><div class="info-2"><div class="info-item-1"> 无论你跑多少距离，放弃很容易，停下来，肉体得到暂时的舒服，但你最终会一无所得。坚持或许很难，但你最后一定会有所收获，跑过的路，永远不会欺骗自己。  Docker基础（下）五，网络管理5.1 容器网络模式  Docker支持5种网络模式  bridge  默认网络，Docker启动后默认创建一个docker0网桥，默认创建的容器也是添加到这个网桥中   host  容器不会获得一个独立的network namespace，而是与宿主机共用一个   none  获取独立的network namespace，但不为容器进行任何网络配置   container  与指定的容器使用同一个network namespace，网卡配置也都是相同的   自定义  自定义网桥，默认与bridge网络一样      5.1.1 bridge网络类型123456789101112131415161718192021222324252627282930313233343536373839404142#安装bridge管理工具[root@localhost ~]# yum -y install...</div></div></div></a><a class="pagination-related" href="/articles/2018/11/15/harborsiyoujingxiangcangku/" title="Harbor私有镜像仓库"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2018-11-15</div><div class="info-item-2">Harbor私有镜像仓库</div></div><div class="info-2"><div class="info-item-1"> 无论你跑多少距离，放弃很容易，停下来，肉体得到暂时的舒服，但你最终会一无所得。坚持或许很难，但你最后一定会有所收获，跑过的路，永远不会欺骗自己。  Harbor私有镜像仓库一，Harbor简介  Harbor可帮助用户迅速搭建企业级注册服务。它提供了管理图形界面，基于角色的访问控制（Role Based Access Control），镜像远程复制（同步），AD&#x2F;LDAP集成，以及审计日志等企业用户需求的功能，同时还原生支持中文。  该项目自推出以来，在Github获得了超过3300多个star和900多个forks。  1.1 基于角色的访问控制 用户与Docker镜像仓库通过“项目”进行组织管理，一个用户可以对多个镜像仓库在同一命名空间（project）里有不同的权限。  1.2 图形化用户界面 用户可以通过浏览器来浏览，检索当前Docker镜像仓库，管理项目和命名空间  1.3 审计管理 所有针对镜像仓库的操作都可以被记录追溯，用于审计管理。  1.4 国际化 基于英文与中文语言进行了本地化。可以增加更多的语言支持。  1.5 RESTful...</div></div></div></a><a class="pagination-related" href="/articles/2019/04/02/Linux-fei-root-yonghushiyong-docker-dewenti/" title="Linux 下非root用户使用docker的问题"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-04-02</div><div class="info-item-2">Linux 下非root用户使用docker的问题</div></div><div class="info-2"><div class="info-item-1"> 无论你跑多少距离，放弃很容易，停下来，肉体得到暂时的舒服，但你最终会一无所得。坚持或许很难，但你最后一定会有所收获，跑过的路，永远不会欺骗自己。  一，解决非root用户使用docker Linux 下非root用户使用docker，如果不需要root权限的话，需要将用户加入到docker组。  12#报错：ERROR: Couldn&#x27;t connect to Docker daemon at http+docker://localunixsocket - is it running?  通常我们使用linux系统的时候，最好是不要直接使用root账号，但是使用Docker的时候，默认又是不能使用非root用户的，关于原因，官方说法如下：   The docker daemon binds to a Unix socket instead of a TCP port. By default that Unix socket is owned by the user root and other users can access it with sudo. For...</div></div></div></a><a class="pagination-related" href="/articles/2019/04/23/rong-qi-zhanman-cipan-fuwuqi-he-rongqi-doumeidawenjian/" title="容器占满了磁盘，但虚机和容器内都没有找到大文件"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-04-23</div><div class="info-item-2">容器占满了磁盘，但虚机和容器内都没有找到大文件</div></div><div class="info-2"><div class="info-item-1"> 无论你跑多少距离，放弃很容易，停下来，肉体得到暂时的舒服，但你最终会一无所得。坚持或许很难，但你最后一定会有所收获，跑过的路，永远不会欺骗自己。  一，原因阐述 领导让我排查一下aws服务器磁盘空间已满的问题，但是看不到大文件的存在，看下图：  12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697#看根下所有目录的空间占用[root@gago-viirs gago_viirs]# cd /[root@gago-viirs /]# du -sh *0	bin49M	boot0	data0	dev31M	etc52K	home0	lib0	lib640	local0	media2.7G	mnt104K	optdu:...</div></div></div></a><a class="pagination-related" href="/articles/2020/04/09/dockerzhilixiananzhuang/" title="Docker 之离线安装"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-09</div><div class="info-item-2">Docker 之离线安装</div></div><div class="info-2"><div class="info-item-1"> 无论你跑多少距离，放弃很容易，停下来，肉体得到暂时的舒服，但你最终会一无所得。坚持或许很难，但你最后一定会有所收获，跑过的路，永远不会欺骗自己。  Docker 之离线安装离线安装docker-ce1234567891011121314151617181920# 根据机器架构进行选择，其中centos64是 x86_64# 这里以18.09.4版本为例# 解压tar xf docker-18.09.4.tar -C /usr/local# 软链ln -s /usr/local/docker/* /usr/bin# service和socket文件# 在  https://github.com/moby/moby/tree/master/contrib/init/systemd  vim /usr/lib/systemd/system/docker.servicevim /usr/lib/systemd/system/docker.socket# 加docker组groupadd docker# 依次起服务systemctl start dockersystemctl...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/themes-img/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Kkabuzs</div><div class="author-info-description">学习记录和整理</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">67</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">18</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">三人行，必有我师！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker%E5%9F%BA%E7%A1%80%EF%BC%88%E4%B8%8A%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">Docker基础（上）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%EF%BC%8CDocker%E7%AE%80%E4%BB%8B%EF%BC%8C%E5%8A%9F%E8%83%BD%E7%89%B9%E6%80%A7%E4%B8%8E%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.1.</span> <span class="toc-text">一，Docker简介，功能特性与应用场景</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-Docker%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 Docker简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-Docker%E5%8A%9F%E8%83%BD%E7%89%B9%E6%80%A7"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 Docker功能特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-Docker%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3 Docker应用场景</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-1-%E5%9C%BA%E6%99%AF1%EF%BC%9A%E5%A4%9A%E7%89%88%E6%9C%AC%E5%A4%9A%E7%A7%8D%E7%B1%BB%E7%B3%BB%E7%BB%9F%E4%B8%8E%E8%BD%AF%E4%BB%B6"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">1.3.1 场景1：多版本多种类系统与软件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-2-%E5%9C%BA%E6%99%AF2%EF%BC%9A-%E7%8E%AF%E5%A2%83"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">1.3.2 场景2： 环境</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-3-%E5%9C%BA%E6%99%AF3%EF%BC%9A-%E5%88%86%E5%8F%91"><span class="toc-number">1.1.3.3.</span> <span class="toc-text">1.3.3 场景3： 分发</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%EF%BC%8CDocker%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-number">1.2.</span> <span class="toc-text">二，Docker的安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 安装环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E7%89%88%E6%9C%AC%E9%80%89%E6%8B%A9"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 版本选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-Docker%E5%AE%89%E8%A3%85%EF%BC%9A%E6%A0%87%E5%87%86%E7%89%88%E6%9C%AC"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 Docker安装：标准版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-Docker%E5%AE%89%E8%A3%85%EF%BC%9ACE%E7%A4%BE%E5%8C%BA%E7%89%88"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.4 Docker安装：CE社区版</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%EF%BC%8CDocker%E7%9A%84%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4"><span class="toc-number">1.3.</span> <span class="toc-text">三，Docker的操作命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-0-%E6%B7%BB%E5%8A%A0docker%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E6%BA%90"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.0 添加docker国内镜像源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Asearch"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.1 Docker命令：search</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Apull"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.2 Docker命令：pull</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Aimages"><span class="toc-number">1.3.4.</span> <span class="toc-text">3.3 Docker命令：images</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Abuild"><span class="toc-number">1.3.5.</span> <span class="toc-text">3.4 Docker命令：build</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Arun"><span class="toc-number">1.3.6.</span> <span class="toc-text">3.5 Docker命令：run</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Aps"><span class="toc-number">1.3.7.</span> <span class="toc-text">3.6 Docker命令：ps</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Aattach"><span class="toc-number">1.3.8.</span> <span class="toc-text">3.7 Docker命令：attach</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-8-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Astop"><span class="toc-number">1.3.9.</span> <span class="toc-text">3.8 Docker命令：stop</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-9-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Astart"><span class="toc-number">1.3.10.</span> <span class="toc-text">3.9 Docker命令：start</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-10-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Arm"><span class="toc-number">1.3.11.</span> <span class="toc-text">3.10 Docker命令：rm</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-11-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Armi"><span class="toc-number">1.3.12.</span> <span class="toc-text">3.11 Docker命令：rmi</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-12-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Acommit"><span class="toc-number">1.3.13.</span> <span class="toc-text">3.12 Docker命令：commit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-13-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Aexec"><span class="toc-number">1.3.14.</span> <span class="toc-text">3.13 Docker命令：exec</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-14-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Acp"><span class="toc-number">1.3.15.</span> <span class="toc-text">3.14 Docker命令：cp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-15-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Acreate"><span class="toc-number">1.3.16.</span> <span class="toc-text">3.15 Docker命令：create</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-16-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Adiff"><span class="toc-number">1.3.17.</span> <span class="toc-text">3.16 Docker命令：diff</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-17-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Aevents"><span class="toc-number">1.3.18.</span> <span class="toc-text">3.17 Docker命令：events</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-18-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Aexport"><span class="toc-number">1.3.19.</span> <span class="toc-text">3.18 Docker命令：export</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-19-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Aimport"><span class="toc-number">1.3.20.</span> <span class="toc-text">3.19 Docker命令：import</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-20-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Ahistory"><span class="toc-number">1.3.21.</span> <span class="toc-text">3.20 Docker命令：history</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-21-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Ainfo"><span class="toc-number">1.3.22.</span> <span class="toc-text">3.21 Docker命令：info</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-22-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Ainspect"><span class="toc-number">1.3.23.</span> <span class="toc-text">3.22 Docker命令：inspect</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-23-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Akill"><span class="toc-number">1.3.24.</span> <span class="toc-text">3.23 Docker命令：kill</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-24-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Asave"><span class="toc-number">1.3.25.</span> <span class="toc-text">3.24 Docker命令：save</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-25-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Aload"><span class="toc-number">1.3.26.</span> <span class="toc-text">3.25 Docker命令：load</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-26-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Alogs"><span class="toc-number">1.3.27.</span> <span class="toc-text">3.26 Docker命令：logs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-27-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Apause-unpause"><span class="toc-number">1.3.28.</span> <span class="toc-text">3.27 Docker命令：pause &amp;&amp; unpause</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-28-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Aport"><span class="toc-number">1.3.29.</span> <span class="toc-text">3.28 Docker命令：port</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-29-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Arename"><span class="toc-number">1.3.30.</span> <span class="toc-text">3.29 Docker命令：rename</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-30-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Arestart"><span class="toc-number">1.3.31.</span> <span class="toc-text">3.30 Docker命令：restart</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-31-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Astats"><span class="toc-number">1.3.32.</span> <span class="toc-text">3.31 Docker命令：stats</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-32-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Atag"><span class="toc-number">1.3.33.</span> <span class="toc-text">3.32 Docker命令：tag</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-33-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Atop"><span class="toc-number">1.3.34.</span> <span class="toc-text">3.33 Docker命令：top</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-34-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Aupdate"><span class="toc-number">1.3.35.</span> <span class="toc-text">3.34 Docker命令：update</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-35-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Aversion-and-wait"><span class="toc-number">1.3.36.</span> <span class="toc-text">3.35 Docker命令：version and wait</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-36-Docker%E5%91%BD%E4%BB%A4%EF%BC%9Alogin-logout-push"><span class="toc-number">1.3.37.</span> <span class="toc-text">3.36 Docker命令：login &amp;&amp; logout &amp;&amp; push</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%EF%BC%8C%E7%AE%A1%E7%90%86%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">1.4.</span> <span class="toc-text">四，管理应用程序数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-Volume%E5%92%8CBind-Mount"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1 Volume和Bind Mount</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-1-Volume"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.1.1 Volume</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-2-Bind-Mounts"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">4.1.2 Bind Mounts</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%AE%9E%E6%88%98%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2LNMP%E7%BD%91%E7%AB%99%E5%B9%B3%E5%8F%B0"><span class="toc-number">1.4.3.</span> <span class="toc-text">4.2 实战容器部署LNMP网站平台</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-1-%E5%88%9B%E5%BB%BAMySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%B9%E5%99%A8"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">4.2.1 创建MySQL数据库容器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-2-%E5%90%91%E5%AE%B9%E5%99%A8%E9%87%8C%E7%9A%84Mysql%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%BA%93"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">4.2.2 向容器里的Mysql创建一个库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-3-%E5%9C%A8docker%E5%AE%BF%E4%B8%BB%E6%9C%BA%E4%B8%8A%E5%AE%89%E8%A3%85mysql%E7%9A%84%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%80%9A%E8%BF%87%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84%E8%AE%BF%E9%97%AE%E5%AE%B9%E5%99%A8%E5%86%85%E7%9A%84mysql"><span class="toc-number">1.4.3.3.</span> <span class="toc-text">4.2.3 在docker宿主机上安装mysql的客户端通过端口映射访问容器内的mysql</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-4-%E5%88%9B%E5%BB%BAnginx-PHP%E7%8E%AF%E5%A2%83%E5%AE%B9%E5%99%A8"><span class="toc-number">1.4.3.4.</span> <span class="toc-text">4.2.4 创建nginx+PHP环境容器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-5-%E8%A7%A3%E5%8E%8Bwordpress%E5%88%B0%E7%BD%91%E9%A1%B5%E7%9B%AE%E5%BD%95-app-wwwroot%E4%B8%8B"><span class="toc-number">1.4.3.5.</span> <span class="toc-text">4.2.5 解压wordpress到网页目录&#x2F;app&#x2F;wwwroot下</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-6-%E5%8D%9A%E5%AE%A2wordpress%E8%AE%BF%E9%97%AE%E6%B5%8B%E8%AF%95"><span class="toc-number">1.4.3.6.</span> <span class="toc-text">4.2.6 博客wordpress访问测试</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/articles/2025/04/22/mongodb-6-0-21-lixian-fenpianjiqun/" title="MongoDB-6.0.21离线分片集群部署">MongoDB-6.0.21离线分片集群部署</a><time datetime="2025-04-21T17:53:44.000Z" title="发表于 2025-04-22 01:53:44">2025-04-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/articles/2025/04/22/mongodb-6-0-21-lixian-fubenjibushu/" title="MongoDB-6.0.21副本集离线部署手册-（Replica Set）副本集模式">MongoDB-6.0.21副本集离线部署手册-（Replica Set）副本集模式</a><time datetime="2025-04-21T17:51:21.000Z" title="发表于 2025-04-22 01:51:21">2025-04-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/articles/2025/04/21/mongodb-6-0-21-lixian-danjiedianbushu/" title="MongoDB-6.0.21离线单节点部署">MongoDB-6.0.21离线单节点部署</a><time datetime="2025-04-21T15:55:06.000Z" title="发表于 2025-04-21 23:55:06">2025-04-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/articles/2023/05/10/jichengyupaisheng/" title="继承与派生">继承与派生</a><time datetime="2023-05-10T05:52:52.000Z" title="发表于 2023-05-10 13:52:52">2023-05-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/articles/2023/05/09/fengzhuang/" title="封装">封装</a><time datetime="2023-05-09T01:37:55.000Z" title="发表于 2023-05-09 09:37:55">2023-05-09</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By Kkabuzs</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>